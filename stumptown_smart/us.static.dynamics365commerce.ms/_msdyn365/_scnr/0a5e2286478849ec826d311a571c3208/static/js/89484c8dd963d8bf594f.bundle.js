/*! For license information please see 89484c8dd963d8bf594f.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkMsdyn365_Commerce_Online=self.webpackChunkMsdyn365_Commerce_Online||[]).push([[17],{141:(e,t,r)=>{r.d(t,{NU:()=>n.N,W7:()=>l,JU:()=>m.J,km:()=>u,A1:()=>p.A1,Ay:()=>p.Ay,CA:()=>d.CA,hX:()=>d.hX,yb:()=>d.yb,f:()=>i.f,m2:()=>s.m2,B1:()=>s.B1,d8:()=>s.d8,h_:()=>s.h_,xX:()=>s.xX,Cq:()=>c.C,gd:()=>c.g,wQ:()=>p.wQ,u1:()=>p.u1,w4:()=>s.w4});r(1510);var n=r(211),o=r(10),a=r(13);class l{constructor(e){this.extraProductsCount=e}}(0,o.Cg)([a.sH],l.prototype,"extraProductsCount",void 0);var i=r(103),s=r(95),d=r(210),c=r(104),m=r(167);class u{constructor(e,t){this.stateId=e,this.isHidden=t}}(0,o.Cg)([a.sH],u.prototype,"isHidden",void 0);var p=r(82)},629:(e,t,r)=>{r.d(t,{D:()=>l,V:()=>i});r(18);var n=r(42),o=r(14),a=r(6);const l=(e,t)=>{const r=(0,n.iz)("orderDetails",e)||"",o=r.includes("?")?"&":"?";return a.StringExtensions.isNullOrWhitespace(t.SalesId)?`${r}${o}transactionId=${t.Id}`:`${r}${o}salesId=${t.SalesId}`},i=(e,t)=>{switch(e){case o.SalesStatus.Created:return t.orderStatusCreated;case o.SalesStatus.Delivered:return t.orderStatusDelivered;case o.SalesStatus.Invoiced:return t.orderStatusInvoiced;case o.SalesStatus.Canceled:return t.orderStatusCanceled;default:return""}}},630:(e,t,r)=>{r.r(t),r.d(t,{OrderHistoryWithSearchAndFiltersOrderListComponent:()=>V});var n=r(5),o=(r(3),r(15),r(19),r(4),r(9),r(2)),a=r(1),l=r(6),i=r(16),s=r(0),d=r.n(s),c=r(8),m=r.n(c),u=r(103),p=r(95),y=r(104),b=r(141),C=r(629);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const v="ms-order-history-with-search-and-filters-order-list",N=`${v}__sales-order`,h=`${v}__sales-order__header`,x=`${v}__sales-order__expand-products-button`,w=`${v}__sales-order__expand-products-button-wrapper`,g=`${v}__btn-order-details`,f=v,_=e=>{let{orderInformationProps:t,placedBy:r,salesId:n,receiptId:o,channelName:l,createdDate:i,count:s,amount:c,channelReferenceId:m}=e;return d().createElement(a.Node,Object.assign({},t),r,d().createElement("div",{className:h},l,s),n,o,i,c,m)},E=e=>{let{deliveryProps:t,heading:r,count:n,processing:o,address:l,trackingInfo:i}=e;return d().createElement(a.Node,Object.assign({},t),r,n,o,l,i)},S=e=>{let{groupProps:t,delivery:r,salesLinesProps:n,salesLines:o}=e;return d().createElement(a.Node,Object.assign({},t),r&&d().createElement(E,Object.assign({},r)),o&&d().createElement(a.Node,Object.assign({},n),o.map((e=>d().createElement(d().Fragment,{key:e.data.salesLine.LineId},e.salesLine)))))},L=e=>{let{groupsProps:t,groups:r}=e;return d().createElement(a.Node,Object.assign({},t),r.map(((e,t)=>d().createElement(S,Object.assign({key:t},e)))))},I=(e,t)=>()=>{for(const e of t)e.isHidden=!1;e.extraProductsCount=0},V=o.msdyn365Commerce.createComponent("OrderHistoryWithSearchAndFiltersOrderListComponent",{component:e=>d().createElement(a.Node,{className:m()(e.className,v)},l.ArrayExtensions.hasElements(e.data.salesOrders)&&e.data.salesOrders.map(((t,r)=>{const n=((e,t,r)=>{const{id:n,typeName:o,context:s,moduleProps:{telemetry:c},data:{products:m,channelIdentities:O,orgUnitLocations:v,customer:N,originators:h},showChannelInfo:_,telemetryContent:E,resources:{freePriceText:S,detailsAriaLabel:L,detailsLabel:V,orderItemLabel:$,orderItemsLabel:A},context:{actionContext:P},retailMultiplePickUpOptionEnabled:B,channelDeliveryOptionConfig:k}=r,H={id:n,typeName:o,context:s,telemetry:c,freePriceText:S},j=null==h?void 0:h.find((t=>e.SalesId&&t.SalesId===e.SalesId||e.Id&&t.TransactionId===e.Id)),D=m&&(0,y.g)(r.moduleProps,f,e,m,H,void 0,void 0,void 0,B,k);let W,M;if(D){const e=T(T({},D),{},{imageOnly:!0});if(!l.ObjectExtensions.isNullOrUndefined(r.salesLinesLimit)){const t=e.salesLines.length-r.salesLinesLimit;if(e.salesLineStates=e.salesLines.map(((e,t)=>{var n;return new b.km(`${null!==(n=e.LineId)&&void 0!==n?n:""}-${t}`,t>=r.salesLinesLimit)})),t>0){const n=new b.W7(t);M=d().createElement(d().Fragment,null,d().createElement(i.nu,null,(()=>{const t=(0,a.format)(r.resources.orderHistoryExpandProductsButtonText,n.extraProductsCount);return n.extraProductsCount>0&&d().createElement(a.Button,{className:x,title:t,role:"button",onClick:I(n,e.salesLineStates),"aria-label":t},t)})))}}W=(0,y.C)(e)}M=d().createElement(d().Fragment,null,M,d().createElement("div",{className:w}));const F=W&&(0,u.f)({moduleName:f,salesLines:W,resources:{orderItemLabel:$,orderItemsLabel:A},retailMultiplePickUpOptionEnabled:B}),U=(0,p.xX)(r.moduleProps,f,e,H,O,v,N,j,_),z=(0,a.getPayloadObject)("click",E,a.TelemetryConstant.OrderDetails),q=(0,a.getTelemetryAttributes)(E,z),R=d().createElement(a.Button,Object.assign({href:(0,C.D)(P,e),role:"button","aria-label":e.ChannelReferenceId&&L?L.replace("{orderId}",e.ChannelReferenceId):"",className:g},q),V);return{orderInfomation:(0,p.h_)(U),groups:F,orderDetailsLink:R,expandProductsButton:M}})(t,0,e);return d().createElement(a.Node,{className:N,key:t.SalesId||t.Id},n.orderInfomation&&d().createElement(_,Object.assign({},n.orderInfomation)),n.groups&&d().createElement(L,Object.assign({},n.groups)),n.expandProductsButton,n.orderDetailsLink)})))})},718:(e,t,r)=>{r.r(t),r.d(t,{OrderHistoryWithSearchAndFiltersViewModeComponent:()=>y,OrderHistoryWithSearchAndFiltersViewModeState:()=>p});r(3),r(9);var n=r(2),o=r(1),a=r(0),l=r.n(a),i=r(8),s=r.n(i);const d="ms-order-history-with-search-and-filters-view-mode-selector",c=`${d}__detailed-view`,m=`${d}__list-view`,u=`${d}__selected`;var p;!function(e){e[e.DetailedView=0]="DetailedView",e[e.ListView=1]="ListView"}(p||(p={}));const y=n.msdyn365Commerce.createComponent("OrderHistoryWithSearchAndFiltersViewModeComponent",{component:e=>{var t,r,n,a,i,y,b,C;const[O,T]=l().useState(e.currentViewModeState),v=t=>{T(t),e.onClick(t)},N=(0,o.getTelemetryAttributes)(e.telemetryContent,(0,o.getPayloadObject)("click",e.telemetryContent,`${o.TelemetryConstant.ViewMode} - Detailed view`)),h=(0,o.getTelemetryAttributes)(e.telemetryContent,(0,o.getPayloadObject)("click",e.telemetryContent,`${o.TelemetryConstant.ViewMode} - List view`));return l().createElement("div",{className:s()(e.className,d)},l().createElement(o.Button,Object.assign({className:s()(c,O===p.DetailedView?u:""),"aria-label":null!==(t=null===(r=e.resources)||void 0===r?void 0:r.detailedViewOptionAriaLabel)&&void 0!==t?t:"",title:null!==(n=null===(a=e.resources)||void 0===a?void 0:a.detailedViewOptionAriaLabel)&&void 0!==n?n:"",role:"button",onClick:()=>v(p.DetailedView)},N)),l().createElement(o.Button,Object.assign({className:s()(m,O===p.ListView?u:""),"aria-label":null!==(i=null===(y=e.resources)||void 0===y?void 0:y.listViewOptionAriaLabel)&&void 0!==i?i:"",title:null!==(b=null===(C=e.resources)||void 0===C?void 0:C.listViewOptionAriaLabel)&&void 0!==b?b:"",role:"button",onClick:()=>v(p.ListView)},h)))}})},719:(e,t,r)=>{r.r(t),r.d(t,{OrderHistoryWithSearchAndFiltersOrganizationWideSelectorComponent:()=>y,OrderHistoryWithSearchAndFiltersOrganizationWideSelectorState:()=>p});r(3),r(9);var n=r(2),o=r(1),a=r(0),l=r.n(a),i=r(8),s=r.n(i);const d="ms-order-history-with-search-and-filters-organization-wide-selector",c=`${d}__button`,m=`${d}__active-button`,u=`${d}__inactive-button`;var p;!function(e){e[e.CurrentUser=0]="CurrentUser",e[e.OrganizationWide=1]="OrganizationWide"}(p||(p={}));const y=n.msdyn365Commerce.createComponent("OrderHistoryWithSearchAndFiltersOrganizationWideSelectorComponent",{component:e=>{var t,r,n,a,i,y,b,C,O,T,v,N,h,x,w,g,f,_;if(!e.data.customer.IsB2bAdmin)return l().createElement("div",{className:s()(e.className,d)});const[E,S]=l().useState(e.currentSelectorState),L=t=>{S(t),e.onChange(t)},I=(0,o.getTelemetryAttributes)(e.telemetryContent,(0,o.getPayloadObject)("click",e.telemetryContent,null!==(t=null===(r=e.resources)||void 0===r?void 0:r.currentUserOptionLabel)&&void 0!==t?t:"Current user order history")),V=(0,o.getTelemetryAttributes)(e.telemetryContent,(0,o.getPayloadObject)("click",e.telemetryContent,null!==(n=null===(a=e.resources)||void 0===a?void 0:a.currentUserOptionLabel)&&void 0!==n?n:"Org wide order history"));return l().createElement("div",{className:s()(e.className,d)},l().createElement(o.Button,Object.assign({className:s()(c,E===p.CurrentUser?m:u),"aria-label":null!==(i=null===(y=e.resources)||void 0===y?void 0:y.currentUserOptionAriaLabel)&&void 0!==i?i:null===(b=e.resources)||void 0===b?void 0:b.currentUserOptionLabel,title:null!==(C=null===(O=e.resources)||void 0===O?void 0:O.currentUserOptionAriaLabel)&&void 0!==C?C:null===(T=e.resources)||void 0===T?void 0:T.currentUserOptionLabel,onClick:()=>L(p.CurrentUser)},I),null===(v=e.resources)||void 0===v?void 0:v.currentUserOptionLabel),l().createElement(o.Button,Object.assign({className:s()(c,E===p.OrganizationWide?m:u),"aria-label":null!==(N=null===(h=e.resources)||void 0===h?void 0:h.organizationWideOptionAriaLabel)&&void 0!==N?N:null===(x=e.resources)||void 0===x?void 0:x.organizationWideOptionLabel,title:null!==(w=null===(g=e.resources)||void 0===g?void 0:g.organizationWideOptionAriaLabel)&&void 0!==w?w:null===(f=e.resources)||void 0===f?void 0:f.organizationWideOptionLabel,onClick:()=>L(p.OrganizationWide)},V),null===(_=e.resources)||void 0===_?void 0:_.organizationWideOptionLabel))}})},720:(e,t,r)=>{r.r(t),r.d(t,{OrderHistoryWithSearchAndFiltersHeaderComponent:()=>u});r(3);var n=r(2),o=r(1),a=r(0),l=r.n(a),i=r(8),s=r.n(i);const d="ms-order-history-with-search-and-filters-header",c=`${d}__heading`,m=`${d}__order-count`,u=n.msdyn365Commerce.createComponent("OrderHistoryWithSearchAndFiltersHeaderComponent",{component:e=>{const{resources:t,data:{salesOrders:r},textProps:a,showOrderCount:i,extraActions:u}=e,p=null==r?void 0:r.length,y=`(${p} ${1===p?null==t?void 0:t.orderCountLabel:null==t?void 0:t.ordersCountLabel})`;return l().createElement(o.Node,{className:s()(e.className,d)},(null==a?void 0:a.text)&&l().createElement(n.Text,Object.assign({},a,{className:c,tag:a.tag||"h2",editProps:{onEdit:e.onChange,requestContext:e.context.request}})),i&&l().createElement("span",{className:m},y),u)}})},721:(e,t,r)=>{r.r(t),r.d(t,{OrderHistoryWithSearchAndFiltersOrderTableComponent:()=>g});r(3);var n=r(2),o=r(6),a=r(17),l=r(0),i=r.n(l),s=r(8),d=r.n(s),c=r(1),m=r(141),u=r(629);const p="ms-order-history-with-search-and-filters-order-table",y=`${p}__row__placed-by`,b=`${p}__row__order-number`,C=`${p}__row__mobile-cell`,O=`${p}__row__actions`,T=`${p}__row__view-details-action`,v=(e,t)=>{if(void 0===t)return"";return e.cultureFormatter.formatDate(t,{year:"numeric",month:"short",day:"numeric"})},N=(e,t)=>{var r;const n="rtl"===(null===(r=document.body.parentElement)||void 0===r?void 0:r.getAttribute("dir"));return e.length>t?n?`â¦${e.substring(0,t-1)}`:`${e.substring(0,t-1)}â¦`:e},h=e=>{const t=window.innerWidth>700?20:12;return i().createElement("span",{className:y,"data-title":`${e.placedByName} ${e.isOnBehalfOfOrder?e.onBehalfOfText:""}`},e.placedByName,e.isOnBehalfOfOrder&&i().createElement(i().Fragment,null,i().createElement("br",null)," ",N(e.onBehalfOfText,t)))},x=(e,t)=>{const r=window.innerWidth>700?20:12,{salesOrder:n,isOnBehalfOfOrder:a,placedByText:l,showOrderPlacedBy:s,resources:{orderHistoryOrderNumberIsNotAvailable:d}}=e;let m=n.SalesId;return o.StringExtensions.isNullOrWhitespace(m)&&(m=d),i().createElement(i().Fragment,null,i().createElement(c.Button,{className:b,href:null!=t?t:""},m),a&&!s&&i().createElement("span",{className:y,"data-title":l},N(l,r)))},w=(e,t,r)=>{var l,s;const p=o.ArrayExtensions.hasElements(r.SalesLines)?(0,m.A1)(r.SalesLines):0,y=(b=e.context,C=r.TotalAmount,N=r.CurrencyCode,void 0===C?"":b.cultureFormatter.formatCurrency(C,N));var b,C,N;const w=(0,u.V)(r.StatusValue,e.resources),g=(0,m.B1)(r,e.data.channelIdentities),f=(0,m.m2)(r,e.data.orgUnitLocations),_=g&&(f?`${e.resources.posChannelNameText} ${g}`:e.resources.onlineStoreChannelNameText),E=((e,t)=>{const{data:{channelIdentities:r,orgUnitLocations:o,customer:a,originators:l},resources:{orderPlacedByFullText:i,orderPlacedByYouText:s,orderOnBehalfOfText:d,orderHistoryOrderNumberIsNotAvailable:c}}=e,u=(0,m.m2)(t,o),p=(0,m.d8)(t,r),y=(0,m.w4)(p,u),b=null==l?void 0:l.find((e=>t.SalesId&&e.SalesId===t.SalesId||t.Id&&e.TransactionId===t.Id)),C=!((0,n.isOboRequest)(e.context.request)||null==b||!b.CustomerId||null==b||!b.CustomerName||null!=b&&b.StaffId||null!=b&&b.StaffName||(null==a?void 0:a.AccountNumber)!==(null==b?void 0:b.CustomerId)),O=!C&&!(0,n.isOboRequest)(e.context.request);let T=null!=b&&b.StaffId&&b.StaffName?b.StaffName:null!=b&&b.CustomerId&&b.CustomerName?b.CustomerName:"-";T=`${T} ${C?s:""}`;const v=y&&(null==b?void 0:b.StaffName)&&(null==a?void 0:a.Name),N=`${i} ${T}`,h=`${d} ${null==a?void 0:a.Name} ${O?s:""}`;return{resources:{orderHistoryOrderNumberIsNotAvailable:c},salesOrder:t,isOnBehalfOfOrder:!!v,originator:b,placedByName:T,placedByText:N,onBehalfOfText:h,showOrderPlacedBy:e.showOrderPlacedBy}})(e,r),S=(0,u.D)(e.context.actionContext,r),L=(0,c.getPayloadObject)("click",e.telemetryContent,c.TelemetryConstant.OrderDetails),I=(0,c.getTelemetryAttributes)(e.telemetryContent,L);return[i().createElement(a.TableCellComponent,{context:e.context,id:e.id,typeName:e.typeName,data:{},key:`row_${t}_0`,contentType:a.TableCellContentType.Text,isVisible:!!e.showOrderPlacedBy&&!e.isMobileView},h(E)),i().createElement(a.TableCellComponent,{context:e.context,id:e.id,typeName:e.typeName,data:{},key:`row_${t}_1`,contentType:a.TableCellContentType.Text,isVisible:!0},x(E,S)),i().createElement(a.TableCellComponent,{context:e.context,id:e.id,typeName:e.typeName,data:{},key:`row_${t}_2`,contentType:a.TableCellContentType.Text,isVisible:!!e.showChannelInfo&&!e.isMobileView},_),i().createElement(a.TableCellComponent,{context:e.context,id:e.id,typeName:e.typeName,data:{},key:`row_${t}_3`,contentType:a.TableCellContentType.Number,isVisible:!e.isMobileView},p),i().createElement(a.TableCellComponent,{context:e.context,id:e.id,typeName:e.typeName,data:{},key:`row_${t}_4`,contentType:a.TableCellContentType.Amount,isVisible:!e.isMobileView},y),i().createElement(a.TableCellComponent,{context:e.context,id:e.id,typeName:e.typeName,data:{},key:`row_${t}_5`,contentType:a.TableCellContentType.Date,isVisible:!e.isMobileView},v(e.context,r.CreatedDateTime)),i().createElement(a.TableCellComponent,{context:e.context,id:e.id,typeName:e.typeName,data:{},key:`row_${t}_6`,contentType:a.TableCellContentType.Text,isVisible:!0},w),i().createElement(a.TableCellComponent,{context:e.context,id:e.id,typeName:e.typeName,data:{},key:`row_${t}_7`,className:d()(O),contentType:a.TableCellContentType.Text,isVisible:!0},i().createElement(a.ActionMenuComponent,{context:e.context,id:e.id,typeName:e.typeName,data:{},ariaLabel:e.resources.orderHistoryActionMenuButtonAriaLabel},i().createElement(c.Button,Object.assign({className:T,href:null!=S?S:"",title:null!==(l=e.resources.orderHistoryViewDetailsButtonText)&&void 0!==l?l:"","aria-label":null!==(s=e.resources.orderHistoryViewDetailsButtonAriaLabel)&&void 0!==s?s:e.resources.orderHistoryViewDetailsButtonText},I),e.resources.orderHistoryViewDetailsButtonText)))]},g=n.msdyn365Commerce.createComponent("OrderHistoryWithSearchAndFiltersOrderTableComponent",{component:e=>{var t,r;return i().createElement(a.TableComponent,{context:e.context,id:e.id,typeName:e.typeName,data:{},className:d()(e.className,p)},i().createElement(a.TableHeaderComponent,{context:e.context,id:e.id,typeName:e.typeName,data:{}},i().createElement(a.TableCellComponent,{context:e.context,id:e.id,typeName:e.typeName,data:{},contentType:a.TableCellContentType.Text,isVisible:!!e.showOrderPlacedBy&&!e.isMobileView},null!==(t=e.resources.orderPlacedByFullText)&&void 0!==t?t:""),i().createElement(a.TableCellComponent,{context:e.context,id:e.id,typeName:e.typeName,data:{},className:d()(e.isMobileView?C:""),contentType:a.TableCellContentType.Text,isVisible:!0},e.resources.orderHistoryOrderNumberText),i().createElement(a.TableCellComponent,{context:e.context,id:e.id,typeName:e.typeName,data:{},contentType:a.TableCellContentType.Text,isVisible:!!e.showChannelInfo&&!e.isMobileView},e.resources.orderHistoryOriginText),i().createElement(a.TableCellComponent,{context:e.context,id:e.id,typeName:e.typeName,data:{},contentType:a.TableCellContentType.Number,isVisible:!e.isMobileView},e.resources.orderHistoryItemsText),i().createElement(a.TableCellComponent,{context:e.context,id:e.id,typeName:e.typeName,data:{},contentType:a.TableCellContentType.Amount,isVisible:!e.isMobileView},e.resources.orderHistoryTotalText),i().createElement(a.TableCellComponent,{context:e.context,id:e.id,typeName:e.typeName,data:{},contentType:a.TableCellContentType.Date,isVisible:!e.isMobileView},e.resources.orderHistoryCreatedDateText),i().createElement(a.TableCellComponent,{context:e.context,id:e.id,typeName:e.typeName,data:{},contentType:a.TableCellContentType.Text,isVisible:!0},e.resources.orderHistoryOrderStatusText),i().createElement(a.TableCellComponent,{context:e.context,id:e.id,typeName:e.typeName,data:{},contentType:a.TableCellContentType.Text,isVisible:!0})),null===(r=e.data.salesOrders)||void 0===r?void 0:r.map(((t,r)=>i().createElement(a.TableRowComponent,{context:e.context,id:e.id,typeName:e.typeName,data:{},key:`row_${r}`},w(e,r,t)))))}})}}]);
//# sourceMappingURL=89484c8dd963d8bf594f.bundle.js.map