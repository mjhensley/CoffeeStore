/*! For license information please see 9aeb613f4dc75e4d92f5.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkMsdyn365_Commerce_Online=self.webpackChunkMsdyn365_Commerce_Online||[]).push([[94],{0:e=>{e.exports=React},11:e=>{e.exports=ReactDOM},1425:(e,t,n)=>{n(4);var o=n(5);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const r={modules:{},dataActions:{}};r.modules["cookie-compliance"]={c:()=>n(1426),$type:"contentModule",da:[],iNM:!0,ns:"@msdyn365-commerce-modules",n:"cookie-compliance",p:"cookie-compliance",pdp:"",md:"node_modules/@msdyn365-commerce-modules/cookie-compliance/dist/lib/modules/cookie-compliance"},window.__bindings__=window.__bindings__||{},window.__bindings__.modules=i(i({},window.__bindings__.modules||{}),r.modules),window.__bindings__.dataActions=i(i({},window.__bindings__.dataActions||{}),r.dataActions);const c={};c["@msdyn365-commerce-modules|cookie-compliance|modules|cookie-compliance|cookie-compliance"]={c:()=>n(1427),cn:"@msdyn365-commerce-modules-cookie-compliance-cookie-compliance"},window.__bindings__=window.__bindings__||{},window.__bindings__.viewDictionary=i(i({},window.__bindings__.viewDictionary||{}),c)},1426:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});n(4);var o=n(5),s=n(2),i=n(6),r=n(1),c=n(8),a=n.n(c),l=n(0);n(3);const p=e=>{let{acceptCookiesButtonText:t,acceptCookiesButtonAriaLabel:n,telemetryContent:o,onClose:s}=e;const i=(0,r.getPayloadObject)("click",o,"accept cookies"),c=(0,r.getTelemetryAttributes)(o,i);return l.createElement("button",Object.assign({type:"button",className:"ms-cookie-compliance__accept-button msc-btn","aria-label":n,onClick:s},c),t)};n(9);class m extends l.PureComponent{constructor(){super(...arguments),this._mapEditableLinks=e=>{if(!e||0===e.length)return null;const t=[];return e.forEach(((e,n)=>{const o=(0,r.getPayloadObject)("click",this.props.telemetryContent,"",""),s=e.linkText?e.linkText:"";o.contentAction.etext=s;const i=(0,r.getTelemetryAttributes)(this.props.telemetryContent,o),c={ariaLabel:e.ariaLabel,className:"link",linkText:e.linkText,linkUrl:e.linkUrl.destinationUrl,openInNewTab:e.openInNewTab,role:"link",additionalProperties:i,onClick:(0,r.onTelemetryClick)(this.props.telemetryContent,o,s)};t.push(c)})),t}}render(){const e=this._mapEditableLinks(this.props.links);return l.createElement("span",{className:"ms-cookie-compliance__cta-layer"},e&&e.length>0?l.createElement(s.Links,{links:e,editProps:{onTextChange:this.props.onTextChange,requestContext:this.props.requestContext}}):null)}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class h extends l.PureComponent{constructor(e){super(e),this.telemetryContent=(0,r.getTelemetryObject)(this.props.context.request.telemetryPageName,this.props.friendlyName,this.props.telemetry),this.handleLinkTextChange=e=>t=>{var n;null!==(n=this.props.config.actionLinks)&&void 0!==n&&n[e]&&(this.props.config.actionLinks[e].linkText=t.target.value)},this.handleContentChange=e=>{this.props.config.content=e.target.value},this.state={visible:!1},this.cookieRef=l.createRef(),this._onDismiss=this._onDismiss.bind(this)}componentDidMount(){const{context:e}=this.props;e&&e.request&&e.request.cookies&&!e.request.cookies.isConsentGiven()&&this.setState({visible:!0})}render(){const{config:e,context:t,resources:n,telemetry:o}=this.props,{acceptCookiesButtonText:r,acceptCookiesAriaLabel:c}=n,{visible:u}=this.state,h=t&&t.request&&t.request.cookies&&t.request.cookies.isConsentGiven();let k;try{k=e}catch(e){return o.error(`Something went wrong while rendering the alert module ------${e}`),l.createElement("div",null,e)}if(h&&!u)return this.props.context.telemetry.error("Cookie Compliance content is empty, module wont render."),null;if(!s.msdyn365Commerce.isBrowser)return l.createElement(l.Fragment,null);const b=d(d({},this.props),{},{onDismiss:this._onDismiss,CookieComplianceBanner:{moduleProps:this.props,className:a()("ms-cookie-compliance",k.className),ref:this.cookieRef},AlertProps:{className:"ms-cookie-compliance__container",color:"white",fade:!1},Content:{className:"ms-cookie-compliance__content"},text:k.content&&l.createElement(s.RichTextComponent,{className:"ms-cookie-compliance__text",text:k.content,editProps:{onEdit:this.handleContentChange,requestContext:this.props.context.request}}),links:i.ArrayExtensions.hasElements(k.actionLinks)&&l.createElement(m,{links:k.actionLinks,onTextChange:this.handleLinkTextChange,requestContext:this.props.context.request,telemetryContent:this.telemetryContent}),acceptButton:l.createElement(p,{onClose:this._onDismiss,acceptCookiesButtonText:r,acceptCookiesButtonAriaLabel:c,telemetryContent:this.telemetryContent})});return this.props.renderView(b)}_onDismiss(){const{context:e}=this.props;e&&e.request&&e.request.cookies&&(e.request.cookies.setConsentCookie(),location.reload()),this.setState({visible:!1})}}const k=h},1427:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});n(3);var o=n(1),s=n(0);const i=e=>{const{CookieComplianceBanner:t,AlertProps:n,Content:i,acceptButton:r,text:c,links:a}=e;return s.createElement(o.Module,Object.assign({},t),s.createElement(o.Alert,{className:n.className,color:n.color,fade:n.fade},s.createElement(o.Node,Object.assign({},i),c,a),r))}}},e=>{e.O(0,[0,3,2,4,5,6,7,8,9],(()=>{return t=1425,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=9aeb613f4dc75e4d92f5.bundle.js.map