/*! For license information please see a15c0e5f6d02465eb5b2.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkMsdyn365_Commerce_Online=self.webpackChunkMsdyn365_Commerce_Online||[]).push([[142],{0:e=>{e.exports=React},11:e=>{e.exports=ReactDOM},667:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});n(4);var s=n(5),i=n(10),r=n(2),o=n(6),a=n(1),l=n(8),u=n.n(l),c=n(13),h=n(0),m=n(715);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,s.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class v extends h.PureComponent{constructor(e){super(e),this.isRetail=!0,this.isCMS=!0,this._setNavigationSource=e=>{switch(e){case"retailServerOnly":this.isRetail=!0,this.isCMS=!1;break;case"cmsOnly":this.isRetail=!1,this.isCMS=!0;break;case"all":this.isRetail=!0,this.isCMS=!0}},this._updateViewport=this._updateViewport.bind(this),this.viewport=e.context.request&&e.context.request.device&&"Mobile"===e.context.request.device.Type?"xs":"lg",this._setNavigationSource(this.props.config&&this.props.config.navigationMenuSource),this.state={isMobile:this.isMobile},this.menuItemList=[]}static getFriendlyName(e,t){let n;return e&&t&&t.length>0&&(n=t.find((t=>t.Language.toLowerCase()===e.toLowerCase()))),n&&n.Text}get isMobile(){return"xs"===this.viewport||"sm"===this.viewport}componentDidMount(){r.default.isBrowser&&(this.resizeThrottledEventHandler=(0,a.addThrottledEvent)(window,"resize",this._updateViewport)),this._updateViewport()}componentWillUnmount(){r.default.isBrowser&&window.removeEventListener("resize",this.resizeThrottledEventHandler,!1)}render(){var e,t;if(this.menuItemList=this._mapData(),(0,r.isEmptyOrNullObject)(this.props.data))return this.props.telemetry.error("Navigatiomenu returned null"),null;const n=p(p(p({},this.props),this.state),{},{imageSettings:{viewports:{xs:{q:"w=224&h=300&m=6",w:0,h:0},xl:{q:"w=224&h=300&m=6",w:0,h:0}},lazyload:!0},gridSettings:this.props.context.request.gridSettings,Navigation:{moduleProps:this.props,className:u()("ms-nav",this.props.config.className,this.state.isMobile?"mobile-vp":"desktop-vp"),tag:"nav",role:this.isMobile?"listbox":"navigation"},MenuList:{className:"ms-nav__list",tag:"ul",role:this.isMobile?"listbox":"menu"},ListItem:{className:"ms-nav__list__item",role:"presentation",tag:"li"},showCategoryImage:null!==(e=this.props.config.displayCategoryImage)&&void 0!==e&&e,showPromotionalContent:null!==(t=this.props.config.displayPromotionalImage)&&void 0!==t&&t,Link:{tag:"a",className:"ms-nav__list__item__link",role:this.isMobile?"option":"menuitem"},DivContainer:{tag:"div",className:"ms-nav__feature"},ImageDivContainer:{tag:"div",className:"category-image",role:"tabpanel"},Button:{className:"ms-nav__list__item__button",tag:"button",role:this.isMobile?"option":"menuitem",onClick:this.props},ImageContainer:{className:"ms-nav__list__item__image"},Span:{className:"ms-nav__list__item__span",tag:"span"},MobileDescriptionContainer:{className:"ms-nav__list__mobile__container"},MobileBackButton:{className:"ms-nav__list__mobile__container__button",tag:"button","aria-label":this.props.resources.backButtonAriaLabel,onClick:this.props},MobileDescriptionLabel:{className:"ms-nav__list__mobile__container__span",tag:"span"},isMobileView:this.state.isMobile,menuItemData:this.menuItemList,className:u()("ms-nav",this.props.config.className)});return this.props.renderView(n)}_mapData(){const{data:e,config:t}=this.props,n=[];return this.isRetail&&e&&e.categories&&e.categories.result&&e.categories.result.length>0&&e.categories.result.map(((e,t)=>n.push(this._constructMenuItemData(e,void 0,!0,t,!0)))),this.isCMS&&t.cmsNavItems&&t.cmsNavItems.length>0&&t.cmsNavItems.map(((e,t)=>n.push(this._constructMenuItemData(void 0,e,!1,t+1)))),this._constructTopMenuItemData(n)}_constructTopMenuItemData(e){var t,n;const s=null!==(t=this.props.config.enabletopMenu)&&void 0!==t&&t;if(!s)return e;const i=[],r={id:1,linkText:null!==(n=this.props.config.rootMenuNavigation)&&void 0!==n?n:"...",linkURL:"#",imageSource:void 0,subMenu:e};return i.push(r),i}_constructMenuItemData(e,t,n,s,i){const r=this.props.context&&this.props.context.request&&this.props.context.request.locale?this.props.context.request.locale:"en-us",{categoryPromotionalContent:a}=this.props.config,l=t&&t.linkText||"",{menuAriaLabel:u}=this.props.resources,c=e&&(null==a?void 0:a.filter((t=>{var n,s;return(null===(n=t.categoryName)||void 0===n?void 0:n.toLowerCase())===(null==e||null===(s=e.Name)||void 0===s?void 0:s.toLowerCase())})));let h="empty";var d,p;return o.ArrayExtensions.hasElements(null==e?void 0:e.Images)&&e.Images[0].Uri&&(h=e.Images[0].Uri),n?{id:v.RSItemIdInit++,linkText:null!==(d=v.getFriendlyName(r,null==e?void 0:e.NameTranslations))&&void 0!==d?d:"",linkURL:null==e?void 0:e.Url,imageSource:h,subMenu:this._getNestedChildren(e,h,i),promotionalContent:this.props.config.displayPromotionalImage&&c,menuSource:m.t.Retail,ariaLabel:`${null!==(p=v.getFriendlyName(r,null==e?void 0:e.NameTranslations))&&void 0!==p?p:""} ${u}`}:{id:v.CMSItemIdInit++,linkText:l,linkURL:t&&t.linkUrl&&t.linkUrl.destinationUrl||"",imageDestinationURL:t&&t.imageLink&&t.imageLink.destinationUrl||"",imageSource:t&&t.image&&t.image.src||"",subMenu:this._getCMSNestedChildren(t),menuSource:m.t.Cms,shouldOpenNewTab:null==t?void 0:t.openInNewTab,ariaLabel:`${l} ${u}`}}_getNestedChildren(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=[];return e&&e.Children&&0!==e.Children.length?(!this.props.config.enabletopMenu&&n&&s.push({linkText:this.props.resources.allCategoryMenuText,imageSource:t,linkURL:(0,o.getCategoryUrl)(e,this.props.context,{})}),e.Children.map(((e,t)=>{s.push(this._constructMenuItemData(e,void 0,!0,t,!1))})),s):[]}_getCMSNestedChildren(e){const t=[];return e&&e.subMenus&&0!==e.subMenus.length?(e.subMenus.map(((e,n)=>{t.push(this._constructMenuItemData(void 0,e,!1,n))})),t):[]}_updateViewport(){this.viewport=this._getViewport(),this.setState({isMobile:this.isMobile})}_getViewport(){const{context:e}=this.props;if(e.request&&e.request.device&&"Mobile"===e.request.device.Type)return"xs";if(r.default.isBrowser&&window.innerWidth){const t=e.request.gridSettings;if(t)return t.xs&&window.innerWidth<=t.xs.w?"xs":t.sm&&window.innerWidth<=t.sm.w?"sm":t.md&&window.innerWidth<=t.md.w?"md":t.lg&&window.innerWidth<=t.lg.w?"lg":"xl"}return"xs"}}v.CMSItemIdInit=m.P.Cms,v.RSItemIdInit=m.P.Retail,(0,i.Cg)([c.sH],v.prototype,"viewport",void 0),(0,i.Cg)([c.EW],v.prototype,"isMobile",null);const g=v},668:(e,t,n)=>{n.d(t,{MenuSource:()=>i.t,MenuTypeIndexId:()=>i.P,NavigationMenu:()=>s.default});var s=n(667),i=(n(716),n(715))},715:(e,t,n)=>{var s,i;n.d(t,{P:()=>s,t:()=>i}),function(e){e[e.Cms=1e3]="Cms",e[e.Retail=5e3]="Retail"}(s||(s={})),function(e){e.Cms="Cms",e.Retail="Retail"}(i||(i={}))},716:(e,t,n)=>{n.r(t),n.d(t,{NavigationMenuView:()=>u,default:()=>c});n(3),n(12),n(4),n(9);var s=n(2),i=n(6),r=n(1),o=n(8),a=n.n(o),l=n(0);class u extends l.PureComponent{constructor(e){super(e),this.currentLevel=0,this._updateCategoryImage=(e,t)=>()=>{const n=t&&t.linkText?t.linkText:"",s=[{src:e,altText:n}];i.ArrayExtensions.hasElements(t.promotionalContent)&&t.promotionalContent.map((e=>{if(e&&e.image){const t=e.image.src,n=e.image.imageSettings;s.push({src:t,altText:e.text,imageSettings:n,additionalProperties:{linkUrl:e.linkUrl.destinationUrl}})}})),this.setState({categoryImage:s.length>0?s:[{src:"empty"}],categoryImageAltText:n})},this._handleDropdownToggle=(e,t)=>()=>{this.props.isMobileView?(u.isBackTrack=!1,this.setState({activeMenu:e.id,mobileViewLabelText:e.linkText,parentMenu:t})):(this.setState({activeMenu:this.state.activeMenu&&this.state.activeMenu===e.id?void 0:e.id,parentMenu:t}),this.props.showCategoryImage&&this._updateCategoryImage(e.imageSource,e)())},this._handleGoBack=()=>()=>{u.isBackTrack=!0,this.setState({activeMenu:this.state.parentMenu})},this._handleClickOutside=e=>{this.menuNode.current&&!this.menuNode.current.contains(e.target)&&this.setState({activeMenu:void 0,mobileViewLabelText:"",categoryImage:null})},this._handleFocusOutside=e=>{this.menuNode.current&&!this.menuNode.current.contains(e.relatedTarget)&&this._closeSubmenu()},this._shouldAddFocusMenuRef=(e,t,n)=>!u.isBackTrack&&0===e||!(!n||!t)&&t===n,this._getCategoryImage=e=>{if(!e||!e.src)return null;const t=(0,i.generateImageUrl)(`${e.src}`,this.props.context.actionContext.requestContext.apiSettings),n={viewports:{xs:{q:"w=300&h=250&m=8",w:0,h:0},sm:{q:"w=300&h=250&m=8",w:0,h:0},md:{q:"w=300&h=250&m=8",w:0,h:0},lg:{q:"w=300&h=250&m=8",w:0,h:0}},lazyload:!0};var r,o;return void 0!==t?l.createElement(s.Image,Object.assign({requestContext:this.props.context.actionContext.requestContext,className:"ms-nav-image__item"},e,{gridSettings:this.props.context.request.gridSettings,imageSettings:null!==(r=null!==(o=e.imageSettings)&&void 0!==o?o:this.props.config.categoryImageSettings)&&void 0!==r?r:n,loadFailureBehavior:"hide",role:"tabpanel",id:"categoryImageTag__categoryImage",altText:e.altText})):null},this.menuNode=l.createRef(),this.menuItemRef=l.createRef(),this.state={activeMenu:void 0,mobileViewLabelText:"",parentMenu:void 0,categoryImageAltText:""},this._closeSubmenu=this._closeSubmenu.bind(this),this.telemetryContent=(0,r.getTelemetryObject)(this.props.context.request.telemetryPageName,this.props.friendlyName,this.props.telemetry),this.payLoad=(0,r.getPayloadObject)("click",this.telemetryContent,"","")}componentDidMount(){s.default.isBrowser&&(document.body.addEventListener("mousedown",this._handleClickOutside),document.body.addEventListener("focusout",this._handleFocusOutside))}componentDidUpdate(){var e;null!==(e=this.menuItemRef.current)&&void 0!==e&&e.children[0]&&this.props.isMobileView&&this.menuItemRef.current.children[0].focus()}componentWillUnmount(){s.default.isBrowser&&(document.body.removeEventListener("mousedown",this._handleClickOutside,!1),document.body.removeEventListener("focusout",this._handleFocusOutside,!1))}render(){const{isMobileView:e,MenuList:t,MobileBackButton:n,MobileDescriptionContainer:s,MobileDescriptionLabel:i,Navigation:o}=this.props;return this.currentLevel=1,l.createElement(r.Module,Object.assign({},o,{className:a()(o.className,e&&void 0!==this.state.activeMenu?"child":"parent")}),l.createElement(r.Node,Object.assign({},t,{ref:this.menuNode,tabIndex:"-1"}),e&&void 0!==this.state.activeMenu&&l.createElement(r.Node,Object.assign({},s),l.createElement(r.Node,Object.assign({},n,{onClick:this._handleGoBack()})),l.createElement(r.Node,Object.assign({},i),this.state.mobileViewLabelText)),this._renderDisplay()))}_renderDisplay(){const{ListItem:e,menuItemData:t,isMobileView:n}=this.props,{activeMenu:s}=this.state,i=[];if(n&&void 0!==s&&t.length>0){let n={};for(const e of t){if(e&&e.id===s){n=e,u.isBackTrack?this.setState({parentMenu:void 0,mobileViewLabelText:e.linkText}):this.setState({parentMenu:void 0});break}if(n=this._getFromSubMenu(e),n&&n.id===s)break}n&&i.push(l.createElement(r.Node,Object.assign({key:n.id},e)," ",this._createMenuItemList(n)," "))}else t.forEach(((t,n)=>{i.push(l.createElement(r.Node,Object.assign({key:n},e,{ref:this._shouldAddFocusMenuRef(n,this.state.mobileViewLabelText,t.linkText)?this.menuItemRef:null}),this._createMenuItemList(t)))}));return i}_getFromSubMenu(e){const t=e&&e.subMenu;if(t&&t.length>0)for(let n=0;n<=t.length-1;n++){if(t[n].id===this.state.activeMenu)return u.isBackTrack?this.setState({parentMenu:e&&e.id,mobileViewLabelText:t[n].linkText}):this.setState({parentMenu:null==e?void 0:e.id}),t[n];const s=this._getFromSubMenu(t[n]);if(s)return s}return this.props.context.telemetry.error("Submenu content is empty, module wont render."),null}_createMenuItemList(e){return e&&e.subMenu&&e.subMenu.length>0?this.props.isMobileView&&void 0!==this.state.activeMenu?this._renderSubMenu(e.subMenu,e.id,!1):l.createElement(l.Fragment,null,this._renderButtonMenuItem(e),this._renderSubMenu(e.subMenu,e.id,!1)):e&&e.linkText&&e.linkURL&&e.linkURL.length>0?this._renderLinkMenuItem(e,e.id,!1,!0):e&&e.linkText&&!e.linkURL?this._renderSpanMenuItem(e,e.id,!0):(this.props.context.telemetry.error("Navigation menu content is empty, module wont render."),null)}_renderSubMenu(e,t,n){const{isMobileView:s,ListItem:i}=this.props,o=this.props.config.enableMultilevelMenu||!1,u=this.props.config.menuLevelSupport||3;if(t&&this.state.activeMenu!==t)return this.props.context.telemetry.error("Navigation Active menu content is empty, module wont render."),null;if(!e||0===e.length)return this.props.context.telemetry.error("Navigation Submenu content is empty, module wont render."),null;let c="";const h=e&&e.map(((e,n)=>{const h=e.subMenu&&e.subMenu.length>0;let m,d;m=h&&s?this._renderButtonMenuItem(e,t,n):e.linkURL?this._renderLinkMenuItem(e,n):this._renderSpanMenuItem(e);const p=h&&o&&this.currentLevel<=Math.round(u)-1;return p&&(this.currentLevel++,c=o?`level-${this.currentLevel.toString()}`:"",d=this._renderSubMenu(e.subMenu,s?e.id:void 0,!0)),l.createElement(r.Node,Object.assign({},i,{key:e.id,className:a()(i.className,p&&"havesubmenu"),ref:this._shouldAddFocusMenuRef(n,this.state.mobileViewLabelText,e.linkText)?this.menuItemRef:null}),m,d)}));return this._renderMenu(c,h,t,n)}_renderButtonMenuItem(e,t,n){const{Button:s}=this.props;return l.createElement(r.Node,Object.assign({key:n},s,{onClick:this._handleDropdownToggle(e,t),onFocus:this._closeSubmenu,"aria-haspopup":!(this.state.activeMenu&&this.state.activeMenu===e.id),"aria-expanded":!(!this.state.activeMenu||this.state.activeMenu!==e.id),"data-parent":t}),e.linkText)}_renderLinkMenuItem(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const{Link:i}=this.props,o=e.linkText?e.linkText:"",a=e.imageSource?e.imageSource:"";this.payLoad.contentAction.etext=o;const u=(0,r.getTelemetryAttributes)(this.telemetryContent,this.payLoad);return l.createElement(r.Node,Object.assign({},i,{key:t,onFocus:s&&this._closeSubmenu,target:e.shouldOpenNewTab?"_blank":void 0,onMouseOver:n&&this._updateCategoryImage(a,e),href:e.linkURL},u,{onClick:(0,r.onTelemetryClick)(this.telemetryContent,this.payLoad,o)}),e.linkText)}_renderPromotionalLink(e,t){const{Link:n}=this.props;this.payLoad.contentAction.etext=e;const s=(0,r.getTelemetryAttributes)(this.telemetryContent,this.payLoad);return e&&t?l.createElement(r.Node,Object.assign({},n,{href:t},s,{onClick:(0,r.onTelemetryClick)(this.telemetryContent,this.payLoad,e)}),e):null}_renderSpanMenuItem(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{Span:s}=this.props;return l.createElement(r.Node,Object.assign({key:t},s,{onFocus:n&&this._closeSubmenu}),e.linkText)}_renderMenu(e,t,n,s){const{DivContainer:o,MenuList:u,ImageDivContainer:c,showCategoryImage:h,showPromotionalContent:m,isMobileView:d}=this.props,p=!d&&(h||m)&&!i.ArrayExtensions.hasElements(this.state.categoryImage)&&!s,v=!d&&m&&i.ArrayExtensions.hasElements(this.state.categoryImage)&&!s,g=this.currentLevel>2||p?o.className:"ms-nav__deafult";return this.currentLevel=1,l.createElement(r.Node,Object.assign({},o,{className:g}),l.createElement(r.Node,Object.assign({},u,{className:a()(u.className,e,p&&"havecateImage",p&&this.props.config.menuLevelSupport&&this.props.config.menuLevelSupport>2&&"navmenu-multi-level")}),t),p&&this.state.categoryImage&&this.state.categoryImage.map((e=>{var t;return l.createElement(r.Node,Object.assign({},c,{key:e.src,className:c.className}),this.state.categoryImage&&this._getCategoryImage(e),v&&this._renderPromotionalLink(e.altText,null===(t=e.additionalProperties)||void 0===t?void 0:t.linkUrl))})))}_closeSubmenu(){this.props.isMobileView||this.setState({activeMenu:void 0,categoryImage:null,mobileViewLabelText:""})}}u.isBackTrack=!1;const c=u},1502:(e,t,n)=>{var s=n(5);n(4);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,s.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const o={modules:{},dataActions:{}};o.modules["navigation-menu"]={c:()=>n(667),$type:"contentModule",da:[{name:"categories",path:"@msdyn365-commerce-modules/retail-actions/dist/lib/get-categories-hierarchy",runOn:0}],iNM:!0,ns:"@msdyn365-commerce-modules",n:"navigation-menu",p:"navigation-menu",pdp:"",md:"node_modules/@msdyn365-commerce-modules/navigation-menu/dist/lib/modules/navigation-menu"};{const e="@msdyn365-commerce-modules/retail-actions/dist/lib/get-categories-hierarchy";let t=n(340);((e,t)=>{if(o.dataActions[e]=t,!o.dataActions[e].default)throw new Error("Data action path "+e+" does not have a default export");o.dataActions[e].default.prototype.RegistrationId=e,o.dataActions[e].default.prototype.id&&(o.dataActions[o.dataActions[e].default.prototype.id]=e)})(e,t)}window.__bindings__=window.__bindings__||{},window.__bindings__.modules=r(r({},window.__bindings__.modules||{}),o.modules),window.__bindings__.dataActions=r(r({},window.__bindings__.dataActions||{}),o.dataActions);const a={};a["__local__|__local__|themes|peetsaw|views|navigation-menu"]={c:()=>n(1503),cn:"__local__-__local__-navigation-menu"},a["@msdyn365-commerce-modules|fabrikam-design-kit|modules|fabrikam|views|navigation-menu"]={c:()=>n(1504),cn:"@msdyn365-commerce-modules-fabrikam-design-kit-navigation-menu"},a["@msdyn365-commerce-modules|navigation-menu|modules|navigation-menu|navigation-menu"]={c:()=>n(716),cn:"@msdyn365-commerce-modules-navigation-menu-navigation-menu"},a["@msdyn365-commerce-theme|adventureworks-theme-kit|modules|adventureworks|views|navigation-menu"]={c:()=>n(1505),cn:"@msdyn365-commerce-theme-adventureworks-theme-kit-navigation-menu"},window.__bindings__=window.__bindings__||{},window.__bindings__.viewDictionary=r(r({},window.__bindings__.viewDictionary||{}),a)},1503:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});var s,i=n(0),r=(n(4),n(5)),o=(n(3),n(12),n(9),n(10)),a=n(668),l=n(6),u=n(1),c=n(8),h=n.n(c),m=n(13),d=n(2);!function(e){e[e.zero=0]="zero",e[e.one=1]="one",e[e.two=2]="two",e[e.three=3]="three",e[e.four=4]="four",e[e.escapeKey=27]="escapeKey",e[e.rootMenu=1]="rootMenu"}(s||(s={}));const p=(e,t,n)=>{const s=(0,l.generateImageUrl)(`${t}`,e.navProps.context.actionContext.requestContext.apiSettings),r={viewports:{xs:{q:"w=162&h=162&m=8",w:0,h:0},sm:{q:"w=162&h=162&m=8",w:0,h:0},md:{q:"w=203&h=203&m=8",w:0,h:0},lg:{q:"w=203&h=203&m=8",w:0,h:0}},lazyload:!0};if(void 0!==s){var o;const t={src:s};return i.createElement(d.Image,Object.assign({requestContext:e.navProps.context.actionContext.requestContext,className:"ms-nav-image__item"},t,{gridSettings:e.navProps.context.request.gridSettings,imageSettings:null!==(o=e.navProps.config.categoryImageSettings)&&void 0!==o?o:r,loadFailureBehavior:"hide",role:"tabpanel",altText:n}))}return null};function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class b extends i.PureComponent{constructor(e){super(e),this.supportedLevel=s.four,this.currentLevel=s.zero,this.escapeKey=s.escapeKey,this.promotionalImage=[],this._handleFocusOutside=e=>{this.menuNode.current&&!this.menuNode.current.contains(e.relatedTarget)&&this._closeSubmenu()},this._bindDesktopCategoryClick=(e,t)=>()=>{const{drawerKeyValue:n}=this.state,s={[e]:!t};this.setState({drawerKeyValue:g(g({},n),s)})},this._updateCategoryImage=(e,t)=>()=>{const n=t.linkText?t.linkText:"",s=[{src:e,altText:n}];if(l.ArrayExtensions.hasElements(t.promotionalContent))for(const e of t.promotionalContent){const t=e.image.src;s.push({src:t,altText:e.text,additionalProperties:{linkUrl:e.linkUrl.destinationUrl}})}this.setState({categoryImage:l.ArrayExtensions.hasElements(s)?s:[{src:"empty"}]})},this._handleDropdownToggle=(e,t)=>()=>{this.state.isOnlyMobile?(b.isBackTrack=!1,this.setState({activeMenu:e.id,mobileViewLabelText:e.linkText,parentMenu:t})):this.props.navProps.config.showMenuOnHover?(this.state.activeMenu!==e.id&&this.setState({activeMenu:this.state.activeMenu&&this.state.activeMenu===e.id?void 0:e.id,parentMenu:t}),this._handleMouseLeaveEvent()):(this.setState({activeMenu:e.id,isNavOpen:!0}),this.props.navProps.showCategoryImage&&this._updateCategoryImage(e.imageSource,e)()),this._resetFocus()},this._resetFocus=()=>{this.state.isOnlyMobile||setTimeout((()=>{this.menuNode&&this.menuNode.current&&this.menuNode.current.focus()}),0)},this._closeSubmenu=()=>{this.state.isOnlyMobile||this.setState({activeMenu:void 0})},this._handleGoBack=()=>()=>{b.isBackTrack=!0,this.setState((e=>({activeMenu:e.parentMenu})))},this._handleClickOutside=e=>{this.menuNode.current&&!this.menuNode.current.contains(e.target)&&(this.state.isOnlyMobile,this.setState({activeMenu:void 0,mobileViewLabelText:"",isNavOpen:!1}))},this._shouldAddFocusMenuRef=(e,t,n)=>!b.isBackTrack&&0===e||!(!n||!t)&&t===n,this._escFunction=e=>{e.keyCode===this.escapeKey&&!this.state.isOnlyMobile&&this.state.isNavOpen&&this.setState({activeMenu:void 0,mobileViewLabelText:"",isNavOpen:!1})},this._customUpdateViewport=()=>{this.setState({isOnlyMobile:this.isOnlyMobile})},this.menuNode=i.createRef(),this.menuItemRef=i.createRef();const{menuItemData:t}=this.props.navProps;if(l.ArrayExtensions.hasElements(t)&&l.ArrayExtensions.hasElements(t[0].subMenu)){const e=t[0].subMenu[0].imageSource?t[0].subMenu[0].imageSource:"",n=t[0].subMenu[0].linkText?t[0].subMenu[0].linkText:"";this.promotionalImage=[{src:e,altText:n}],l.ArrayExtensions.hasElements(t[0].subMenu[0].promotionalContent)&&t[0].subMenu[0].promotionalContent.map((e=>{const t=e.image.src;return this.promotionalImage.push({src:t,altText:e.text,additionalProperties:{linkUrl:e.linkUrl.destinationUrl}}),null}))}this.state={activeMenu:void 0,mobileViewLabelText:"",parentMenu:void 0,drawerKeyValue:{},timeout:null,isOnlyMobile:this.isOnlyMobile,categoryImage:this.promotionalImage,isNavOpen:!1},this.telemetryContent=(0,u.getTelemetryObject)(this.props.navProps.context.request.telemetryPageName,this.props.navProps.friendlyName,this.props.navProps.telemetry),this.payLoad=(0,u.getPayloadObject)("click",this.telemetryContent,"","")}get isOnlyMobile(){return"xs"===(0,u.isMobile)({variant:u.VariantType.Browser,context:this.props.navProps.context.request})}componentDidMount(){this.customResizeThrottledEventHandler=(0,u.addThrottledEvent)(window,"resize",this._customUpdateViewport),this._customUpdateViewport(),document.addEventListener("keydown",this._escFunction,!1),document.body.addEventListener("mousedown",this._handleClickOutside),document.body.addEventListener("focusout",this._handleFocusOutside);const e=()=>{if(this.props.navProps.context.request.user.isAuthenticated&&this.props.navProps.context.request.cookies.isConsentGiven()){let e=this.props.navProps.context.request.cookies.get("shouldNavBeActive").value||"";if(""===e)return this.props.navProps.context.request.cookies.set("shouldNavBeActive","true"),!0;"true"===e&&this.props.navProps.context.request.cookies.set("shouldNavBeActive","false")}return!1};this.setState({activeMenu:e()?1:void 0,isNavOpen:e()})}componentDidUpdate(){var e;null!==(e=this.menuItemRef.current)&&void 0!==e&&e.children[0]&&this.props.navProps.isMobileView&&this.menuItemRef.current.children[0].focus()}componentWillUnmount(){window.removeEventListener("resize",this.customResizeThrottledEventHandler,!1),document.body.removeEventListener("mousedown",this._handleClickOutside,!1),document.body.removeEventListener("focusout",this._handleFocusOutside,!1)}_constructMenuItemData(e,t,n){const s=this.props.navProps.context&&this.props.navProps.context.request&&this.props.navProps.context.request.locale?this.props.navProps.context.request.locale:"en-us",{categoryPromotionalContent:i}=this.props.navProps.config,r=e&&(null==i?void 0:i.filter((t=>{var n,s;return(null===(n=t.categoryName)||void 0===n?void 0:n.toLowerCase())===(null==e||null===(s=e.Name)||void 0===s?void 0:s.toLowerCase())})));let o="empty";return l.ArrayExtensions.hasElements(null==e?void 0:e.Images)&&e.Images[0].Uri&&(o=e.Images[0].Uri),{id:void 0===t?1:t+1,linkText:a.NavigationMenu.getFriendlyName(s,null==e?void 0:e.NameTranslations)||"",linkURL:null==e?void 0:e.Url,imageSource:o,subMenu:this._getNestedChildren(e,o,n),promotionalContent:this.props.navProps.config.displayPromotionalImage&&r}}_getNestedChildren(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=[];return e&&e.Children&&0!==e.Children.length?(!this.props.navProps.config.enabletopMenu&&n&&s.push({linkText:this.props.navProps.resources.allCategoryMenuText,imageSource:t,linkURL:(0,l.getCategoryUrl)(e,this.props.navProps.context,{})}),e.Children.map(((e,t)=>{s.push(this._constructMenuItemData(e,t,!0))})),s):[]}render(){this.currentLevel=1;const e=this.props.navProps.menuItemData;return i.createElement(u.Node,{className:"ms-nav root-disabled",ref:this.menuNode},this.state.isOnlyMobile?this._renderMobileMenu():i.createElement(i.Fragment,null,e.map((e=>this._createMenuItemList(e)))))}_renderMobileMenu(){const{MenuList:e,MobileBackButton:t,MobileDescriptionContainer:n,MobileDescriptionLabel:s,Navigation:r}=this.props.navProps;return this.currentLevel=1,i.createElement(u.Module,Object.assign({},r,{className:h()(r.className,this.state.isOnlyMobile&&void 0!==this.state.activeMenu?"child":"parent")}),i.createElement(u.Node,Object.assign({},e,{tabIndex:"-1"}),this.state.isOnlyMobile&&void 0!==this.state.activeMenu&&i.createElement(u.Node,Object.assign({},n),i.createElement(u.Node,Object.assign({},t,{onClick:this._handleGoBack()})),i.createElement(u.Node,Object.assign({},s),this.state.mobileViewLabelText)),this._renderDisplay()))}_renderDrawerLink(e){return e.linkURL&&!l.StringExtensions.isNullOrWhitespace(e.linkURL)?this._renderLinkMenuItem(e):e.linkURL?null:this._renderSpanMenuItem(e)}_renderDisplay(){const{ListItem:e}=this.props.navProps,t=this.props.navProps.menuItemData,{activeMenu:n}=this.state,s=[];if(l.ArrayExtensions.hasElements(t)&&(t[0].id=1),this.state.isOnlyMobile&&void 0!==n&&l.ArrayExtensions.hasElements(t)){const n=this._getFromSubMenu(void 0,t);n&&s.push(i.createElement(u.Node,Object.assign({key:n.id},e)," ",this._createMenuItemList(n)," "))}else for(const[n,r]of t.entries())s.push(i.createElement(u.Node,Object.assign({key:r.id},e,{ref:this._shouldAddFocusMenuRef(n,this.state.mobileViewLabelText,r.linkText)?this.menuItemRef:null}),this._createMenuItemList(r)));return s}_getFromSubMenu(e,t){if(!t)return null;for(let n=0;n<=t.length-s.one;n++){const s=t[Number(n)];if(s.id===this.state.activeMenu)return b.isBackTrack?this.setState({parentMenu:e,mobileViewLabelText:s.linkText}):this.setState({parentMenu:e}),s;const i=this._getFromSubMenu(s.id,s.subMenu);if(i)return i}return null}_createMenuItemList(e){return l.ArrayExtensions.hasElements(e.subMenu)?this.state.isOnlyMobile&&void 0!==this.state.activeMenu?this._renderSubMenu(e.subMenu,e.id,!1):i.createElement("div",{className:"col"},this._renderButtonMenuItem(e),this._renderSubMenu(e.subMenu,e.id,!1)):e.linkURL&&!l.StringExtensions.isNullOrWhitespace(e.linkURL)?this._renderLinkMenuItem(e,e.id):e.linkURL||this.state.isOnlyMobile&&void 0!==this.state.activeMenu?null:this._renderSpanMenuItem(e)}_renderSubMenu(e){var t,n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2?arguments[2]:void 0,a=e;const{ListItem:c}=this.props.navProps,m=null!==(t=this.props.navProps.config.enableMultilevelMenu)&&void 0!==t&&t,d=null!==(n=this.props.navProps.config.menuLevelSupport)&&void 0!==n?n:s.three;if(r&&this.state.activeMenu!==r)return this.props.navProps.context.telemetry.error("Navigation Active menu content is empty, module wont render."),null;if(!a||!l.ArrayExtensions.hasElements(a))return this.props.navProps.context.telemetry.error("Navigation Submenu content is empty, module wont render."),null;let p="";const v=a.map(((e,t)=>{const n=e.subMenu&&l.ArrayExtensions.hasElements(e.subMenu);let o,a;o=n&&this.state.isOnlyMobile?this._renderButtonMenuItem(e,r,t):this.currentLevel!==s.one&&n?null:this.getMenuItem(e,t);const v=n&&m&&this.currentLevel<=Math.round(d)-s.one;n&&!this.state.isOnlyMobile&&(this.currentLevel>=s.two?a=this._renderSubMenuDrawer(e):this.currentLevel<=this.supportedLevel&&(this.currentLevel++,p=`level-${this.currentLevel.toString()}`,a=this._renderSubMenu(e.subMenu,void 0,!0))),v&&this.state.isOnlyMobile&&(this.currentLevel++,p=m?`level-${this.currentLevel.toString()}`:"",a=this._renderSubMenu(e.subMenu,e.id,!0));const g=e.imageSource?e.imageSource:"";return i.createElement(u.Node,Object.assign({},c,{key:e.id,onMouseOver:this.currentLevel===s.one&&this._updateCategoryImage(g,e),className:h()(c.className,v&&"havesubmenu"),ref:this._shouldAddFocusMenuRef(t,this.state.mobileViewLabelText,e.linkText)?this.menuItemRef:null}),o,a)}));return this._renderMenu(p,v,o)}getMenuItem(e,t){let n;return n=this.currentLevel===s.one?e.linkURL?this._renderLinkMenuItemLevelOne(e,t):this._renderSpanMenuItem(e):e.linkURL?this._renderLinkMenuItem(e,t):this._renderSpanMenuItem(e),n}_renderSubMenuDrawer(e){var t;const n=`level-${this.currentLevel.toString()}`,r=e.linkText,o=this.state.drawerKeyValue,a=void 0!==r?r:"",c=o,m=null!==(t=this.props.navProps.config.menuLevelSupport)&&void 0!==t?t:s.three;let d=!1;c[e.id]&&(d=!0);const p={timeout:0,isOpen:d};return i.createElement(u.Drawer,{collapseProps:p,key:e.id,className:h()("ms-nav__drawer_desktop",n),openGlyph:"ms-nav__drawer-open",closeGlyph:"ms-nav__drawer-close",glyphPlacement:"start",toggleButtonText:a,onToggle:this._bindDesktopCategoryClick(e.id,d)},i.createElement("div",null,e.subMenu.map((e=>l.ArrayExtensions.hasElements(e.subMenu)&&(this.currentLevel++,this.currentLevel<m)?this._renderSubMenuDrawer(e):this._renderDrawerLink(e)))))}_renderButtonMenuItem(e,t,n){const{Button:s,config:{showMenuOnHover:r}}=this.props.navProps;return r?i.createElement(u.Node,Object.assign({key:n},s,{tag:"a",href:this.state.isOnlyMobile?null:e.linkURL,onClick:this.state.isOnlyMobile?this._handleDropdownToggle(e,t):()=>e.linkURL?window.location.href=e.linkURL:null,onMouseEnter:this.state.isOnlyMobile?null:this._handleDropdownToggle(e,t),onFocus:this.state.isOnlyMobile?null:this._closeSubmenu,"aria-haspopup":!(this.state.activeMenu&&this.state.activeMenu===e.id),"aria-expanded":!(!this.state.activeMenu||this.state.activeMenu!==e.id),"data-parent":t,role:"link"}),e.linkText):i.createElement(u.Node,Object.assign({key:n},this.props.navProps.Button,{onClick:this._handleDropdownToggle(e,t),onMouseEnter:this.props.navProps.config.showMenuOnHover?this._handleDropdownToggle(e,t):null,onFocus:this._closeSubmenu,"aria-haspopup":!(this.state.activeMenu===e.id),"aria-expanded":!(this.state.activeMenu!==e.id),"data-parent":t,"aria-label":this.state.isOnlyMobile?e.ariaLabel:void 0}),e.linkText)}_renderLinkMenuItem(e,t){const{Link:n}=this.props.navProps,s=e.linkText?e.linkText:"";this.payLoad.contentAction.etext=s;const r=(0,u.getTelemetryAttributes)(this.telemetryContent,this.payLoad);return i.createElement(u.Node,Object.assign({},n,{key:t,href:e.linkURL},r,{target:e.shouldOpenNewTab?"_blank":void 0,onClick:(0,u.onTelemetryClick)(this.telemetryContent,this.payLoad,s)}),e.linkText)}_renderLinkMenuItemLevelOne(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{Link:s}=this.props.navProps,r=e.linkText?e.linkText:"",o=e.imageSource?e.imageSource:"";this.payLoad.contentAction.etext=r;const a=(0,u.getTelemetryAttributes)(this.telemetryContent,this.payLoad);return i.createElement(u.Node,Object.assign({},s,{key:t,onMouseOver:n&&this._updateCategoryImage(o,e),href:e.linkURL},a,{onClick:(0,u.onTelemetryClick)(this.telemetryContent,this.payLoad,r)}),e.linkText)}_renderPromotionalLink(e,t){const{Link:n}=this.props.navProps;this.payLoad.contentAction.etext=e;const s=(0,u.getTelemetryAttributes)(this.telemetryContent,this.payLoad);return e&&t?i.createElement(u.Node,Object.assign({},n,{href:t},s,{onClick:(0,u.onTelemetryClick)(this.telemetryContent,this.payLoad,e)}),e):null}_renderSpanMenuItem(e,t){const{Span:n}=this.props.navProps;return i.createElement(u.Node,Object.assign({key:t},n),e.linkText)}_renderMenu(e,t,n){var r;const{DivContainer:o,MenuList:a,ImageDivContainer:c,showCategoryImage:m=!1,showPromotionalContent:d}=this.props.navProps,v=!this.state.isOnlyMobile&&m&&null!==this.state.categoryImage&&void 0!==this.state.categoryImage&&!n,g=!this.state.isOnlyMobile&&d&&l.ArrayExtensions.hasElements(this.state.categoryImage)&&!n,b=this.currentLevel>s.two||v?o.className:"ms-nav__deafult";this.currentLevel=s.one;const M=v&&this.props.navProps.config.menuLevelSupport&&this.props.navProps.config.menuLevelSupport>s.two&&"navmenu-multi-level",y=null===(r=this.state.categoryImage)||void 0===r?void 0:r.filter((e=>!l.StringExtensions.isNullOrWhitespace(e.src))),_=null==y?void 0:y.map((e=>e.src)).join("-");return i.createElement(u.Node,Object.assign({},o,{className:b}),i.createElement(u.Node,Object.assign({},a,{className:h()(a.className,e,v&&"havecateImage",M)}),t),i.createElement("div",{className:"category-image-container",key:_},v&&l.ArrayExtensions.hasElements(y)&&y.map((e=>{var t,n;return i.createElement(u.Node,Object.assign({},c,{className:c.className,key:e.src}),p(this.props,null!==(t=e.src)&&void 0!==t?t:"",e.altText.toString()),g&&this._renderPromotionalLink(e.altText,null===(n=e.additionalProperties)||void 0===n?void 0:n.linkUrl))}))))}_handleMouseLeaveEvent(){const{config:{menuHideTimeout:e}}=this.props.navProps,t=e&&1e3*e||0,n=()=>{const e=document.querySelectorAll(":hover");let s=e[e.length-1],i=!1;for(;s.parentNode;){var r;if(s=s.parentNode,null!==(r=s.classList)&&void 0!==r&&r.contains("ms-nav")){i=!0;break}}if(i){if(t>0){const e=this.state.timeout;e&&(clearTimeout(e),this.setState({timeout:null}))}}else if(t>0){let e=this.state.timeout;e||(e=setTimeout((()=>{this._closeSubmenu(),document.removeEventListener("mousemove",n)}),t),this.setState({timeout:e}))}else this._closeSubmenu(),document.removeEventListener("mousemove",n)};document.removeEventListener("mousemove",n),document.addEventListener("mousemove",n)}}b.isBackTrack=!1,(0,o.Cg)([m.EW],b.prototype,"isOnlyMobile",null);const M=b;function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class k extends i.PureComponent{constructor(e){super(e),this.supportedLevel=s.four,this.currentLevel=s.zero,this.escapeKey=s.escapeKey,this.promotionalImage=[],this.menuItemData=[],this._toggleNavBar=()=>{this.setState((e=>({activeMenu:s.rootMenu,isNavOpen:!e.isNavOpen})))},this._bindDesktopCategoryClick=(e,t)=>()=>{const{drawerKeyValue:n}=this.state,s={[e]:!t};this.setState({drawerKeyValue:_(_({},n),s)})},this._updateCategoryImage=(e,t)=>()=>{const n=t.linkText?t.linkText:"",s=[{src:e,altText:n}];if(l.ArrayExtensions.hasElements(t.promotionalContent))for(const e of t.promotionalContent){const t=e.image.src;s.push({src:t,altText:e.text,additionalProperties:{linkUrl:e.linkUrl.destinationUrl}})}this.setState({categoryImage:l.ArrayExtensions.hasElements(s)?s:[{src:"empty"}]})},this._handleDropdownToggle=(e,t)=>()=>{this.state.isOnlyMobile?(k.isBackTrack=!1,this.setState({activeMenu:e.id,mobileViewLabelText:e.linkText,parentMenu:t})):(this.setState({activeMenu:e.id,parentMenu:t}),this.props.navProps.showCategoryImage&&this._updateCategoryImage(e.imageSource,e)())},this._handleGoBack=()=>()=>{k.isBackTrack=!0,this.setState((e=>({activeMenu:e.parentMenu})))},this._handleClickOutside=e=>{this.menuNode.current&&!this.menuNode.current.contains(e.target)&&(this.state.isOnlyMobile?this.setState({activeMenu:void 0,mobileViewLabelText:"",isNavOpen:!1}):this.setState({activeMenu:s.rootMenu,mobileViewLabelText:"",isNavOpen:!1}))},this._addShopAllLink=()=>{const{menuItemData:e}=this.props.navProps;var t;(this.menuItemData=e,l.ArrayExtensions.hasElements(e)&&l.ArrayExtensions.hasElements(e[0].subMenu))&&(null===(t=this.menuItemData[0].subMenu)||void 0===t||t.map((e=>{const t={};return Object.assign(t,{imageSource:e.imageSource}),Object.assign(t,{linkText:this.props.navProps.resources.allCategoryMenuText}),Object.assign(t,{linkURL:e.linkURL}),l.ArrayExtensions.hasElements(e.subMenu)&&e.menuSource===a.MenuSource.Retail&&e.subMenu.unshift(t),e})))},this._shouldAddFocusMenuRef=(e,t,n)=>!k.isBackTrack&&0===e||!(!n||!t)&&t===n,this._closeNavMenu=()=>{this.state.isOnlyMobile?this.setState({activeMenu:void 0,mobileViewLabelText:"",isNavOpen:!1}):this.setState({activeMenu:s.rootMenu,mobileViewLabelText:"",isNavOpen:!1})},this._escFunction=e=>{e.keyCode===this.escapeKey&&!this.state.isOnlyMobile&&this.state.isNavOpen&&this.setState({activeMenu:s.rootMenu,mobileViewLabelText:"",isNavOpen:!1})},this._customUpdateViewport=()=>{this.setState({isOnlyMobile:this.isOnlyMobile})},this.menuNode=i.createRef(),this.menuItemRef=i.createRef();const{menuItemData:t,config:{openNavOnAuthentication:n},context:{request:{user:{isAuthenticated:r}}}}=this.props.navProps;if(l.ArrayExtensions.hasElements(t)&&l.ArrayExtensions.hasElements(t[0].subMenu)){const e=t[0].subMenu[0].imageSource?t[0].subMenu[0].imageSource:"",n=t[0].subMenu[0].linkText?t[0].subMenu[0].linkText:"";this.promotionalImage=[{src:e,altText:n}],l.ArrayExtensions.hasElements(t[0].subMenu[0].promotionalContent)&&t[0].subMenu[0].promotionalContent.map((e=>{const t=e.image.src;return this.promotionalImage.push({src:t,altText:e.text,additionalProperties:{linkUrl:e.linkUrl.destinationUrl}}),null}))}this.state={activeMenu:s.rootMenu,mobileViewLabelText:"",parentMenu:void 0,drawerKeyValue:{},timeout:null,isOnlyMobile:this.isOnlyMobile,categoryImage:this.promotionalImage,isNavOpen:!(!r||!n)},this.telemetryContent=(0,u.getTelemetryObject)(this.props.navProps.context.request.telemetryPageName,this.props.navProps.friendlyName,this.props.navProps.telemetry),this.payLoad=(0,u.getPayloadObject)("click",this.telemetryContent,"",""),this.attributes=(0,u.getTelemetryAttributes)(this.telemetryContent,this.payLoad)}get isOnlyMobile(){return"xs"===(0,u.isMobile)({variant:u.VariantType.Browser,context:this.props.navProps.context.request})}componentDidMount(){this.customResizeThrottledEventHandler=(0,u.addThrottledEvent)(window,"resize",this._customUpdateViewport),document.addEventListener("keydown",this._escFunction,!1),this._customUpdateViewport(),document.body.addEventListener("mousedown",this._handleClickOutside),this._addShopAllLink()}componentDidUpdate(){var e;null!==(e=this.menuItemRef.current)&&void 0!==e&&e.children[0]&&this.props.navProps.isMobileView&&this.menuItemRef.current.children[0].focus()}componentWillUnmount(){window.removeEventListener("resize",this.customResizeThrottledEventHandler,!1),document.body.removeEventListener("mousedown",this._handleClickOutside,!1)}render(){this.currentLevel=s.one;return i.createElement(u.Node,{className:"nav-menu-container",ref:this.menuNode},this.state.isOnlyMobile?this._renderMobileMenu():i.createElement(i.Fragment,null,i.createElement(u.Button,Object.assign({className:"ms-header__nav-icon",onClick:this._toggleNavBar,"aria-controls":"header-nav-mobile",title:this.props.navProps.resources.hamburgerAriaLabel,"aria-label":this.props.navProps.resources.hamburgerAriaLabel},this.attributes)),this._renderCollapseMenu()))}_renderCollapseMenu(){return i.createElement(u.Collapse,{className:"ms-header__collapsible-hamburger",isOpen:this.state.isNavOpen},this.state.isOnlyMobile?this._renderMobileMenu():this._renderDesktopMenu())}_renderMobileMenu(){const{MobileBackButton:e,MobileDescriptionContainer:t,MobileDescriptionLabel:n,Navigation:r}=this.props.navProps;return this.currentLevel=s.one,i.createElement(u.Module,Object.assign({},r,{className:h()(r.className,this.state.isOnlyMobile&&void 0!==this.state.activeMenu?"child":"parent")}),i.createElement(u.Node,Object.assign({},this.props.navProps.MenuList,{tabIndex:"-1"}),this.state.isOnlyMobile&&void 0!==this.state.activeMenu&&i.createElement(u.Node,Object.assign({},t),i.createElement(u.Node,Object.assign({},e,{onClick:this._handleGoBack()})),i.createElement(u.Node,Object.assign({},n),this.state.mobileViewLabelText)),this._renderDisplay()))}_renderDesktopMenu(){const{Navigation:e}=this.props.navProps;return i.createElement(u.Module,Object.assign({},e,{className:h()(e.className)}),i.createElement(u.Node,Object.assign({},this.props.navProps.MenuList,{tabIndex:"-1"}),this._renderDisplay(),i.createElement("div",{className:"ms-nav-close-button"},i.createElement("button",{className:"btn nav-menu-close","aria-label":"Close",onClick:this._closeNavMenu}))))}_renderDrawerLink(e){return e.linkURL&&!l.StringExtensions.isNullOrWhitespace(e.linkURL)?this._renderLinkMenuItem(e):e.linkURL?null:this._renderSpanMenuItem(e)}_renderDisplay(){const{ListItem:e}=this.props.navProps;let t=[];t=this.state.isOnlyMobile?this.menuItemData:this.props.navProps.menuItemData;const{activeMenu:n}=this.state,s=[];let r=[],o=[];const c=JSON.parse(JSON.stringify(t));for(const e of c)o=e.subMenu.filter((e=>e.id&&e.id>=a.MenuTypeIndexId.Retail)),e.subMenu=o;for(const e of t)r=e.subMenu.filter((e=>e.id&&e.id<a.MenuTypeIndexId.Retail));if(this.state.isOnlyMobile&&void 0!==n&&l.ArrayExtensions.hasElements(t)){let r={};for(const e of t){if(e.id===n){r=e,k.isBackTrack?this.setState({parentMenu:void 0,mobileViewLabelText:e.linkText}):this.setState({parentMenu:void 0});break}if(r=this._getFromSubMenu(e),r&&r.id===n)break}r&&s.push(i.createElement(u.Node,Object.assign({key:r.id},e)," ",this._createMenuItemList(r)," "))}else{for(const[t,n]of c.entries())s.push(i.createElement(u.Node,Object.assign({key:n.id},e,{ref:this._shouldAddFocusMenuRef(t,this.state.mobileViewLabelText,n.linkText)?this.menuItemRef:null}),this._createMenuItemList(n)));for(const[t,n]of r.entries())s.push(i.createElement(u.Node,Object.assign({key:n.id},e,{ref:this._shouldAddFocusMenuRef(t,this.state.mobileViewLabelText,n.linkText)?this.menuItemRef:null}),this._createMenuItemList(n)))}return s}_getFromSubMenu(e){const t=null==e?void 0:e.subMenu;if(t&&l.ArrayExtensions.hasElements(t))for(let n=0;n<=t.length-s.one;n++){const i=t[Number(n)];let r=null==e?void 0:e.id;if(i.id===this.state.activeMenu)return r===s.rootMenu&&i.id<a.MenuTypeIndexId.Retail&&(r=void 0),k.isBackTrack?this.setState({parentMenu:r,mobileViewLabelText:i.linkText}):this.setState({parentMenu:r}),i;const o=this._getFromSubMenu(i);if(o)return o}return null}_createMenuItemList(e){return l.ArrayExtensions.hasElements(e.subMenu)?this.state.isOnlyMobile&&void 0!==this.state.activeMenu?this._renderSubMenu(e.subMenu,e.id,!1):i.createElement(i.Fragment,null,this._renderButtonMenuItem(e),this._renderSubMenu(e.subMenu,e.id)):e.linkURL&&!l.StringExtensions.isNullOrWhitespace(e.linkURL)?this._renderLinkMenuItem(e,e.id):e.linkURL?null:this._renderSpanMenuItem(e)}_renderSubMenu(e,t,n){var r,o;let c=e;t===s.rootMenu&&(c=e.filter((e=>e.id&&e.id>=a.MenuTypeIndexId.Retail)));const{ListItem:m}=this.props.navProps,d=null!==(r=this.props.navProps.config.enableMultilevelMenu)&&void 0!==r&&r,p=null!==(o=this.props.navProps.config.menuLevelSupport)&&void 0!==o?o:s.three;if(t&&this.state.activeMenu!==t)return this.props.navProps.context.telemetry.error("Navigation Active menu content is empty, module wont render."),null;if(!c||!l.ArrayExtensions.hasElements(c))return this.props.navProps.context.telemetry.error("Navigation Submenu content is empty, module wont render."),null;let v="";const g=c.map(((e,n)=>{const r=e.subMenu&&l.ArrayExtensions.hasElements(e.subMenu);let o,a;o=r&&this.state.isOnlyMobile?this._renderButtonMenuItem(e,t,n):this.currentLevel!==s.one&&r?null:this.getMenuItem(e,n);const c=r&&d&&this.currentLevel<=Math.round(p)-s.one;r&&!this.state.isOnlyMobile&&(this.currentLevel>=s.two?a=this._renderSubMenuDrawer(e):this.currentLevel<=this.supportedLevel-s.one&&(this.currentLevel++,v=`level-${this.currentLevel.toString()}`,a=this._renderSubMenu(e.subMenu,void 0,!0))),c&&this.state.isOnlyMobile&&(this.currentLevel++,v=d?`level-${this.currentLevel.toString()}`:"",a=this._renderSubMenu(e.subMenu,e.id,!0));const g=e.imageSource?e.imageSource:"";return i.createElement(u.Node,Object.assign({},m,{key:e.id,onMouseOver:this.currentLevel===s.one&&this._updateCategoryImage(g,e),className:h()(m.className,c&&"havesubmenu"),ref:this._shouldAddFocusMenuRef(n,this.state.mobileViewLabelText,e.linkText)?this.menuItemRef:null}),o,a)}));return this._renderMenu(v,g,n)}getMenuItem(e,t){let n;return n=this.currentLevel===s.one?e.linkURL?this._renderLinkMenuItemLevelOne(e,t):this._renderSpanMenuItem(e):e.linkURL?this._renderLinkMenuItem(e,t):this._renderSpanMenuItem(e),n}_renderSubMenuDrawer(e){var t;const n=`level-${this.currentLevel.toString()}`,r=e.linkText,o=this.state.drawerKeyValue,a=void 0!==r?r:"",c=o,m=null!==(t=this.props.navProps.config.menuLevelSupport)&&void 0!==t?t:s.three;let d=!1;c[e.id]&&(d=!0);const p={timeout:0,isOpen:d};return i.createElement(u.Drawer,{collapseProps:p,key:e.id,className:h()("ms-nav__drawer_desktop",n),openGlyph:"ms-nav__drawer-open",closeGlyph:"ms-nav__drawer-close",glyphPlacement:"start",toggleButtonText:a,onToggle:this._bindDesktopCategoryClick(e.id,d)},i.createElement("div",null,e.subMenu.map((e=>l.ArrayExtensions.hasElements(e.subMenu)&&(this.currentLevel++,this.currentLevel<m)?this._renderSubMenuDrawer(e):this._renderDrawerLink(e)))))}_renderButtonMenuItem(e,t,n){return i.createElement(u.Node,Object.assign({key:n},this.props.navProps.Button,{onClick:this._handleDropdownToggle(e,t),"aria-haspopup":!(this.state.activeMenu&&this.state.activeMenu===e.id),"aria-expanded":!(!this.state.activeMenu||this.state.activeMenu!==e.id),"data-parent":t,"aria-label":this.state.isOnlyMobile?e.ariaLabel:void 0}),e.linkText)}_renderLinkMenuItem(e,t){const{Link:n}=this.props.navProps,s=e.linkText?e.linkText:"";this.payLoad.contentAction.etext=s;const r=(0,u.getTelemetryAttributes)(this.telemetryContent,this.payLoad);return i.createElement(u.Node,Object.assign({},n,{key:t,href:e.linkURL},r,{target:e.shouldOpenNewTab?"_blank":void 0,onClick:(0,u.onTelemetryClick)(this.telemetryContent,this.payLoad,s)}),e.linkText)}_renderLinkMenuItemLevelOne(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{Link:s}=this.props.navProps,r=e.linkText?e.linkText:"",o=e.imageSource?e.imageSource:"";this.payLoad.contentAction.etext=r;const a=(0,u.getTelemetryAttributes)(this.telemetryContent,this.payLoad);return i.createElement(u.Node,Object.assign({},s,{key:t,onMouseOver:n&&this._updateCategoryImage(o,e),href:e.linkURL},a,{onClick:(0,u.onTelemetryClick)(this.telemetryContent,this.payLoad,r)}),e.linkText)}_renderPromotionalLink(e,t){const{Link:n}=this.props.navProps;this.payLoad.contentAction.etext=e;const s=(0,u.getTelemetryAttributes)(this.telemetryContent,this.payLoad);return e&&t?i.createElement(u.Node,Object.assign({},n,{href:t},s,{onClick:(0,u.onTelemetryClick)(this.telemetryContent,this.payLoad,e)}),e):null}_renderSpanMenuItem(e,t){const{Span:n}=this.props.navProps;return i.createElement(u.Node,Object.assign({key:t},n),e.linkText)}_renderMenu(e,t,n){var r;const{DivContainer:o,ImageDivContainer:a,showCategoryImage:c,showPromotionalContent:m}=this.props.navProps,d=!this.state.isOnlyMobile&&c&&null!==this.state.categoryImage&&void 0!==this.state.categoryImage&&!n,v=!this.state.isOnlyMobile&&m&&l.ArrayExtensions.hasElements(this.state.categoryImage)&&!n,g=this.currentLevel>s.two||d?o.className:"ms-nav__deafult";this.currentLevel=s.one;const b=d&&this.props.navProps.config.menuLevelSupport&&this.props.navProps.config.menuLevelSupport>s.two&&"navmenu-multi-level",M=null===(r=this.state.categoryImage)||void 0===r?void 0:r.filter((e=>!l.StringExtensions.isNullOrWhitespace(e.src))),y=null==M?void 0:M.map((e=>e.src)).join("-");return i.createElement(u.Node,Object.assign({},o,{className:g}),i.createElement(u.Node,Object.assign({},this.props.navProps.MenuList,{className:h()(this.props.navProps.MenuList.className,e,d&&"havecateImage",b)}),t),i.createElement("div",{className:"category-image-container",key:y},d&&l.ArrayExtensions.hasElements(M)&&M.map((e=>{var t,n;return i.createElement(u.Node,Object.assign({},a,{className:a.className,key:e.src}),p(this.props,null!==(t=e.src)&&void 0!==t?t:"",e.altText.toString()),v&&this._renderPromotionalLink(e.altText,null===(n=e.additionalProperties)||void 0===n?void 0:n.linkUrl))}))))}}k.isBackTrack=!1,(0,o.Cg)([m.EW],k.prototype,"isOnlyMobile",null);const L=k,O=e=>e.config.enabletopMenu?i.createElement(L,{navProps:e}):i.createElement(M,{navProps:e})},1504:(e,t,n)=>{n.r(t),n.d(t,{NavigationMenuView:()=>m,default:()=>d});var s=n(5),i=(n(3),n(12),n(4),n(9),n(2)),r=n(6),o=n(1),a=n(8),l=n.n(a),u=n(0);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,s.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class m extends u.PureComponent{constructor(e){super(e),this.currentLevel=0,this._positionInSetOffset=1,this.escapeKey=27,this._updateCategoryImage=(e,t)=>()=>{const n=t&&t.linkText?t.linkText:"",s=[{src:e,altText:n}];r.ArrayExtensions.hasElements(t.promotionalContent)&&t.promotionalContent.map((e=>{if(e&&e.image){const t=e.image.src,n=e.image.imageSettings;s.push({src:t,altText:e.text,imageSettings:n,additionalProperties:{linkUrl:e.linkUrl.destinationUrl}})}})),this.setState({categoryImage:s.length>0?s:[{src:"empty"}],categoryImageAltText:n})},this._handleDropdownToggle=(e,t)=>()=>{this.props.isMobileView?this.setState({activeMenu:e.id,parentMenu:t}):(this.setState({activeMenu:this.state.activeMenu&&this.state.activeMenu===e.id?void 0:e.id,parentMenu:t}),this.props.showCategoryImage&&this._updateCategoryImage(e.imageSource,e)()),this._resetFocus()},this._resetFocus=()=>{this.props.isMobileView&&setTimeout((()=>{this.menuNode&&this.menuNode.current&&this.menuNode.current.focus()}),0)},this._handleClickOutside=e=>{this.menuNode.current&&!this.menuNode.current.contains(e.target)&&this.setState({activeMenu:void 0,categoryImage:null})},this._handleFocusOutside=e=>{this.menuNode.current&&!this.menuNode.current.contains(e.relatedTarget)&&this._closeSubmenu()},this._escFunction=e=>{if(e.keyCode===this.escapeKey){if(!this.props.isMobileView){const e=Array.from(this.menuNode.current.childNodes);for(const t of e){const e=t.firstChild;"true"===e.getAttribute("aria-expanded")&&e.focus()}}this._closeSubmenu()}},this._getCategoryImage=e=>{if(!e||!e.src)return null;const t=(0,r.generateImageUrl)(e.src,this.props.context.actionContext.requestContext.apiSettings),n={viewports:{xs:{q:"w=300&h=250&m=8",w:0,h:0},sm:{q:"w=300&h=250&m=8",w:0,h:0},md:{q:"w=300&h=250&m=8",w:0,h:0},lg:{q:"w=300&h=250&m=8",w:0,h:0}},lazyload:!0};if(void 0!==t){var s,o;const r={src:t};return u.createElement(i.Image,Object.assign({requestContext:this.props.context.actionContext.requestContext,className:"ms-nav-image__item"},r,{gridSettings:this.props.context.request.gridSettings,imageSettings:null!==(s=null!==(o=e.imageSettings)&&void 0!==o?o:this.props.config.categoryImageSettings)&&void 0!==s?s:n,loadFailureBehavior:"hide",role:"tabpanel",id:`${e.src}__categoryImage`,altText:e.altText}))}return null},this._onDrawerChange=e=>{const{drawerKeyValue:t}=this.state,n=void 0!==e.buttonText?e.buttonText:"",s={[n]:e.isOpen};this.setState({drawerKeyValue:h(h({},t),s)})},this.menuNode=u.createRef(),this.state={activeMenu:void 0,parentMenu:void 0,categoryImageAltText:"",drawerKeyValue:{}},this._closeSubmenu=this._closeSubmenu.bind(this),this._escFunction=this._escFunction.bind(this),this.telemetryContent=(0,o.getTelemetryObject)(this.props.context.request.telemetryPageName,this.props.friendlyName,this.props.telemetry),this.payLoad=(0,o.getPayloadObject)("click",this.telemetryContent,"","")}componentDidMount(){i.default.isBrowser&&(document.body.addEventListener("keydown",this._escFunction,!1),document.body.addEventListener("mousedown",this._handleClickOutside),document.body.addEventListener("focusout",this._handleFocusOutside))}componentWillUnmount(){i.default.isBrowser&&(document.removeEventListener("keydown",this._escFunction,!1),document.body.removeEventListener("mousedown",this._handleClickOutside,!1),document.body.removeEventListener("focusout",this._handleFocusOutside,!1))}render(){const{isMobileView:e}=this.props;return this.currentLevel=1,u.createElement(u.Fragment,null,e?this._renderMobileMenu():this._renderDesktopMenu())}_renderMobileMenu(){const{isMobileView:e,menuItemData:t,Navigation:n}=this.props;return u.createElement(o.Module,Object.assign({},n,{className:l()(n.className,e?"mobile-view":"desktop-view")}),t.map(((e,n)=>this._renderDrawerMenu(e,t.length,n+this._positionInSetOffset))))}_renderDesktopMenu(){const{MenuList:e,Navigation:t}=this.props;return u.createElement(o.Module,Object.assign({},t,{className:l()(t.className)}),u.createElement(o.Node,Object.assign({},e,{ref:this.menuNode,tabIndex:"-1"}),this._renderDisplay()))}_renderDrawerMenu(e,t,n){return e&&e.subMenu&&r.ArrayExtensions.hasElements(e.subMenu)?this._renderDrawer(e,t,n):this._renderLinkMenuItem(e,void 0,!0,!1,t,n)}_renderDrawer(e,t,n){const s=e.linkText,i=this.state.drawerKeyValue,a=void 0!==s?s:"",l=void 0!==i?i:{},{isMobileView:c}=this.props;let h=!1;l[a]&&(h=!0);const m={isOpen:h};return u.createElement(o.Drawer,{role:"listbox",toggleButtonProps:{"aria-setsize":t,"aria-posinset":n,role:"menuitem"},ariaLabel:c?e.ariaLabel:void 0,key:e.id,className:"ms-nav__drawer",openGlyph:"ms-nav__drawer-open",onToggle:this._onDrawerChange,collapseProps:m,closeGlyph:"ms-nav__drawer-close",glyphPlacement:"end",toggleButtonText:this._renderLinkText(s,t,n)},u.createElement("div",{role:"listbox"},e.subMenu.map(((t,n)=>{var s,i;return r.ArrayExtensions.hasElements(t.subMenu)?this._renderDrawer(t,null===(i=e.subMenu)||void 0===i?void 0:i.length,n+this._positionInSetOffset):this._renderDrawerLink(t,null===(s=e.subMenu)||void 0===s?void 0:s.length,n+this._positionInSetOffset)}))))}_renderLinkText(e,t,n){return u.createElement("span",{"aria-setsize":t,"aria-posinset":n},e)}_renderDrawerLink(e,t,n){return e&&e.linkText&&e.linkURL&&e.linkURL.length>0?this._renderLinkMenuItem(e,void 0,!0,!1,t,n):e&&e.linkText&&!e.linkURL?this._renderSpanMenuItem(e):null}_renderDisplay(){const{ListItem:e,menuItemData:t,isMobileView:n}=this.props,{activeMenu:s}=this.state,i=[];if(n&&void 0!==s&&t.length>0){let n={};for(const e of t){if(e&&e.id===s){n=e,this.setState({parentMenu:void 0});break}if(n=this._getFromSubMenu(e),n&&n.id===s)break}n&&i.push(u.createElement(o.Node,Object.assign({key:n.id},e)," ",this._createMenuItemList(n)," "))}else t.forEach(((t,n)=>{i.push(u.createElement(o.Node,Object.assign({key:n},e),this._createMenuItemList(t)))}));return i}_getFromSubMenu(e){const t=e&&e.subMenu;if(t&&t.length>0)for(let n=0;n<=t.length-1;n++){if(t[n].id===this.state.activeMenu)return this.setState({parentMenu:null==e?void 0:e.id}),t[n];const s=this._getFromSubMenu(t[n]);if(s)return s}return null}_createMenuItemList(e){return e&&e.subMenu&&e.subMenu.length>0?this.props.isMobileView&&void 0!==this.state.activeMenu?this._renderSubMenu(e.subMenu,e.id):u.createElement(u.Fragment,null,this._renderButtonMenuItem(e),this._renderSubMenu(e.subMenu,e.id)):e&&e.linkText&&e.linkURL&&e.linkURL.length>0?this._renderLinkMenuItem(e,e.id,!1,!0):e&&e.linkText&&!e.linkURL?this._renderSpanMenuItem(e,e.id,!0):null}_renderSubMenu(e,t,n){const{isMobileView:s,ListItem:i}=this.props,r=this.props.config.enableMultilevelMenu||!1,a=this.props.config.menuLevelSupport||3;if(t&&this.state.activeMenu!==t)return this.props.context.telemetry.error("Navigation Active menu content is empty, module wont render."),null;if(!e||0===e.length)return this.props.context.telemetry.error("Navigation Submenu content is empty, module wont render."),null;let c="";const h=e&&e.map(((e,n)=>{const h=e.subMenu&&e.subMenu.length>0;let m,d;m=h&&s?this._renderButtonMenuItem(e,t,n):e.linkURL?this._renderLinkMenuItem(e,n):this._renderSpanMenuItem(e);const p=h&&r&&this.currentLevel<=Math.round(a)-1;return p&&(this.currentLevel++,c=r?`level-${this.currentLevel.toString()}`:"",d=this._renderSubMenu(e.subMenu,s?e.id:void 0,!0)),u.createElement(o.Node,Object.assign({},i,{key:e.id,className:l()(i.className,p&&"havesubmenu")}),m,d)}));return this._renderMenu(c,h,t,n)}_renderButtonMenuItem(e,t,n){const{Button:s}=this.props;return u.createElement(o.Node,Object.assign({key:n},s,{onClick:this._handleDropdownToggle(e,t),onFocus:this._closeSubmenu,"aria-haspopup":!(this.state.activeMenu&&this.state.activeMenu===e.id),"aria-expanded":!(!this.state.activeMenu||this.state.activeMenu!==e.id),"data-parent":t}),e.linkText)}_renderLinkMenuItem(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;const{Link:a,isMobileView:l}=this.props,c=e.linkText?e.linkText:"",h=e.imageSource?e.imageSource:"";this.payLoad.contentAction.etext=c;const m=(0,o.getTelemetryAttributes)(this.telemetryContent,this.payLoad);return u.createElement(o.Node,Object.assign({"aria-setsize":l?i:void 0,"aria-posinset":l?r:void 0,"aria-label":l?e.ariaLabel:void 0},a,{key:t,onFocus:s&&this._closeSubmenu,target:e.shouldOpenNewTab?"_blank":void 0,onMouseOver:n&&this._updateCategoryImage(h,e),href:e.linkURL},m,{onClick:(0,o.onTelemetryClick)(this.telemetryContent,this.payLoad,c)}),e.linkText)}_renderPromotionalLink(e,t){const{Link:n}=this.props;this.payLoad.contentAction.etext=e;const s=(0,o.getTelemetryAttributes)(this.telemetryContent,this.payLoad);return e&&t?u.createElement(o.Node,Object.assign({},n,{href:t},s,{onClick:(0,o.onTelemetryClick)(this.telemetryContent,this.payLoad,e)}),e):null}_renderSpanMenuItem(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{Span:s}=this.props;return u.createElement(o.Node,Object.assign({key:t},s,{onFocus:n&&this._closeSubmenu}),e.linkText)}_renderMenu(e,t,n,s){const{DivContainer:i,MenuList:a,ImageDivContainer:c,showCategoryImage:h,isMobileView:m,showPromotionalContent:d}=this.props,p=!m&&h&&null!==this.state.categoryImage&&void 0!==this.state.categoryImage&&!s,v=!m&&d&&r.ArrayExtensions.hasElements(this.state.categoryImage)&&!s,g=this.currentLevel>2||p?i.className:"ms-nav__deafult";return this.currentLevel=1,u.createElement(o.Node,Object.assign({},i,{className:g}),u.createElement(o.Node,Object.assign({},a,{className:l()(a.className,e,p&&"havecateImage",p&&this.props.config.menuLevelSupport&&this.props.config.menuLevelSupport>2&&"navmenu-multi-level")}),t),u.createElement("div",{className:"category-image-container"},p&&this.state.categoryImage&&this.state.categoryImage.map((e=>{var t;return u.createElement(o.Node,Object.assign({key:e.src},c,{className:c.className}),this.state.categoryImage&&this._getCategoryImage(e),v&&this._renderPromotionalLink(e.altText,null===(t=e.additionalProperties)||void 0===t?void 0:t.linkUrl))}))))}_closeSubmenu(){this.props.isMobileView||this.setState({activeMenu:void 0})}}const d=m},1505:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});var s,i=n(0),r=(n(4),n(5)),o=(n(3),n(12),n(9),n(10)),a=n(668),l=n(6),u=n(1),c=n(8),h=n.n(c),m=n(13),d=n(2);!function(e){e[e.zero=0]="zero",e[e.one=1]="one",e[e.two=2]="two",e[e.three=3]="three",e[e.four=4]="four",e[e.escapeKey=27]="escapeKey",e[e.rootMenu=1]="rootMenu"}(s||(s={}));const p=(e,t,n)=>{const s=(0,l.generateImageUrl)(`${t}`,e.navProps.context.actionContext.requestContext.apiSettings),r={viewports:{xs:{q:"w=162&h=162&m=8",w:0,h:0},sm:{q:"w=162&h=162&m=8",w:0,h:0},md:{q:"w=203&h=203&m=8",w:0,h:0},lg:{q:"w=203&h=203&m=8",w:0,h:0}},lazyload:!0};if(void 0!==s){var o;const t={src:s};return i.createElement(d.Image,Object.assign({requestContext:e.navProps.context.actionContext.requestContext,className:"ms-nav-image__item"},t,{gridSettings:e.navProps.context.request.gridSettings,imageSettings:null!==(o=e.navProps.config.categoryImageSettings)&&void 0!==o?o:r,loadFailureBehavior:"hide",role:"tabpanel",altText:n}))}return null};function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class b extends i.PureComponent{constructor(e){super(e),this.supportedLevel=s.four,this.currentLevel=s.zero,this.escapeKey=s.escapeKey,this.promotionalImage=[],this._toggleNavBar=()=>{this.setState((e=>({activeMenu:1,isNavOpen:!e.isNavOpen})))},this._bindDesktopCategoryClick=(e,t)=>()=>{const{drawerKeyValue:n}=this.state,s={[e]:!t};this.setState({drawerKeyValue:g(g({},n),s)})},this._updateCategoryImage=(e,t)=>()=>{const n=t.linkText?t.linkText:"",s=[{src:e,altText:n}];if(l.ArrayExtensions.hasElements(t.promotionalContent))for(const e of t.promotionalContent){const t=e.image.src;s.push({src:t,altText:e.text,additionalProperties:{linkUrl:e.linkUrl.destinationUrl}})}this.setState({categoryImage:l.ArrayExtensions.hasElements(s)?s:[{src:"empty"}]})},this._handleDropdownToggle=(e,t)=>()=>{this.state.isOnlyMobile?(b.isBackTrack=!1,this.setState({activeMenu:e.id,mobileViewLabelText:e.linkText,parentMenu:t})):(this.setState({activeMenu:e.id,parentMenu:t}),this.props.navProps.showCategoryImage&&this._updateCategoryImage(e.imageSource,e)())},this._handleGoBack=()=>()=>{b.isBackTrack=!0,this.setState((e=>({activeMenu:e.parentMenu})))},this._handleClickOutside=e=>{this.menuNode.current&&!this.menuNode.current.contains(e.target)&&(this.state.isOnlyMobile?this.setState({activeMenu:void 0,mobileViewLabelText:"",isNavOpen:!1}):this.setState({activeMenu:1,mobileViewLabelText:"",isNavOpen:!1}))},this._shouldAddFocusMenuRef=(e,t,n)=>!b.isBackTrack&&0===e||!(!n||!t)&&t===n,this._closeNavMenu=()=>{var e;this.state.isOnlyMobile?this.setState({activeMenu:void 0,mobileViewLabelText:"",isNavOpen:!1}):this.setState({activeMenu:1,mobileViewLabelText:"",isNavOpen:!1}),null===(e=this.menuNode.current)||void 0===e||e.children[0].focus()},this._escFunction=e=>{var t;e.keyCode===this.escapeKey&&!this.state.isOnlyMobile&&this.state.isNavOpen&&(this.setState({activeMenu:1,mobileViewLabelText:"",isNavOpen:!1}),null===(t=this.menuNode.current)||void 0===t||t.children[0].focus())},this._customUpdateViewport=()=>{this.setState({isOnlyMobile:this.isOnlyMobile})},this.menuNode=i.createRef(),this.menuItemRef=i.createRef();const{menuItemData:t}=this.props.navProps;if(l.ArrayExtensions.hasElements(t)&&l.ArrayExtensions.hasElements(t[0].subMenu)){const e=t[0].subMenu[0].imageSource?t[0].subMenu[0].imageSource:"",n=t[0].subMenu[0].linkText?t[0].subMenu[0].linkText:"";this.promotionalImage=[{src:e,altText:n}],l.ArrayExtensions.hasElements(t[0].subMenu[0].promotionalContent)&&t[0].subMenu[0].promotionalContent.map((e=>{const t=e.image.src;return this.promotionalImage.push({src:t,altText:e.text,additionalProperties:{linkUrl:e.linkUrl.destinationUrl}}),null}))}this.state={activeMenu:1,mobileViewLabelText:"",parentMenu:void 0,drawerKeyValue:{},isOnlyMobile:this.isOnlyMobile,categoryImage:this.promotionalImage,isNavOpen:!1},this.telemetryContent=(0,u.getTelemetryObject)(this.props.navProps.context.request.telemetryPageName,this.props.navProps.friendlyName,this.props.navProps.telemetry),this.payLoad=(0,u.getPayloadObject)("click",this.telemetryContent,"",""),this.attributes=(0,u.getTelemetryAttributes)(this.telemetryContent,this.payLoad)}get isOnlyMobile(){return"xs"===(0,u.isMobile)({variant:u.VariantType.Browser,context:this.props.navProps.context.request})}componentDidMount(){this.customResizeThrottledEventHandler=(0,u.addThrottledEvent)(window,"resize",this._customUpdateViewport),document.addEventListener("keydown",this._escFunction,!1),this._customUpdateViewport(),document.body.addEventListener("mousedown",this._handleClickOutside)}componentDidUpdate(){var e;null!==(e=this.menuItemRef.current)&&void 0!==e&&e.children[0]&&this.props.navProps.isMobileView&&this.menuItemRef.current.children[0].focus()}componentWillUnmount(){window.removeEventListener("resize",this.customResizeThrottledEventHandler,!1),document.body.removeEventListener("mousedown",this._handleClickOutside,!1)}render(){this.currentLevel=1;return i.createElement(u.Node,{className:"nav-menu-container",ref:this.menuNode},this.state.isOnlyMobile?this._renderMobileMenu():i.createElement(i.Fragment,null,i.createElement(u.Button,Object.assign({className:"ms-header__nav-icon",onClick:this._toggleNavBar,"aria-controls":"header-nav-mobile",title:this.props.navProps.resources.hamburgerAriaLabel,"aria-label":this.props.navProps.resources.hamburgerAriaLabel},this.attributes)),this._renderCollapseMenu()))}_renderCollapseMenu(){return i.createElement(u.Collapse,{className:"ms-header__collapsible-hamburger",isOpen:this.state.isNavOpen},this.state.isOnlyMobile?this._renderMobileMenu():this._renderDesktopMenu())}_renderMobileMenu(){const{MenuList:e,MobileBackButton:t,MobileDescriptionContainer:n,MobileDescriptionLabel:s,Navigation:r}=this.props.navProps;return this.currentLevel=1,i.createElement(u.Module,Object.assign({},r,{className:h()(r.className,this.state.isOnlyMobile&&void 0!==this.state.activeMenu?"child":"parent")}),i.createElement(u.Node,Object.assign({},e,{tabIndex:"-1"}),this.state.isOnlyMobile&&void 0!==this.state.activeMenu&&i.createElement(u.Node,Object.assign({},n),i.createElement(u.Node,Object.assign({},t,{onClick:this._handleGoBack()})),i.createElement(u.Node,Object.assign({},s),this.state.mobileViewLabelText)),this._renderDisplay()))}_renderDesktopMenu(){const{MenuList:e,Navigation:t}=this.props.navProps;return i.createElement(u.Module,Object.assign({},t,{className:h()(t.className,"ms-nav__disable-top-menu")}),i.createElement(u.Node,Object.assign({},e,{tabIndex:"-1"}),this._renderDisplay(),i.createElement("div",{className:"ms-nav-close-button"},i.createElement("button",{className:"btn nav-menu-close","aria-label":"Close",onClick:this._closeNavMenu}))))}_renderDrawerLink(e){return e.linkURL&&!l.StringExtensions.isNullOrWhitespace(e.linkURL)?this._renderLinkMenuItem(e):e.linkURL?null:this._renderSpanMenuItem(e)}_renderDisplay(){const{ListItem:e}=this.props.navProps,t=this.props.navProps.menuItemData,{activeMenu:n}=this.state,s=[];if(l.ArrayExtensions.hasElements(t)&&(t[0].id=1),this.state.isOnlyMobile&&void 0!==n&&l.ArrayExtensions.hasElements(t)){const n=this._getFromSubMenu(void 0,t);n&&s.push(i.createElement(u.Node,Object.assign({key:n.id},e)," ",this._createMenuItemList(n)," "," "))}else for(const[n,r]of t.entries())s.push(i.createElement(u.Node,Object.assign({key:r.id},e,{ref:this._shouldAddFocusMenuRef(n,this.state.mobileViewLabelText,r.linkText)?this.menuItemRef:null}),this._createMenuItemList(r)));return s}_getFromSubMenu(e,t){if(!t)return null;for(let n=0;n<=t.length-s.one;n++){const s=t[Number(n)];if(s.id===this.state.activeMenu)return b.isBackTrack?this.setState({parentMenu:e,mobileViewLabelText:s.linkText}):this.setState({parentMenu:e}),s;const i=this._getFromSubMenu(s.id,s.subMenu);if(i)return i}return null}_createMenuItemList(e){return l.ArrayExtensions.hasElements(e.subMenu)?this.state.isOnlyMobile&&void 0!==this.state.activeMenu?this._renderSubMenu(e.subMenu,e.id,!1):i.createElement(i.Fragment,null,this._renderButtonMenuItem(e),this._renderSubMenu(e.subMenu,e.id)):e.linkURL&&!l.StringExtensions.isNullOrWhitespace(e.linkURL)?this._renderLinkMenuItem(e,e.id):e.linkURL||this.state.isOnlyMobile&&void 0!==this.state.activeMenu?null:this._renderSpanMenuItem(e)}_renderSubMenu(e,t,n){var r,o;let c=e;t===s.rootMenu&&(c=e.filter((e=>e.id&&e.id>=a.MenuTypeIndexId.Retail)));const{ListItem:m}=this.props.navProps,d=null!==(r=this.props.navProps.config.enableMultilevelMenu)&&void 0!==r&&r,p=null!==(o=this.props.navProps.config.menuLevelSupport)&&void 0!==o?o:s.three;if(t&&this.state.activeMenu!==t)return this.props.navProps.context.telemetry.error("Navigation Active menu content is empty, module wont render."),null;if(!c||!l.ArrayExtensions.hasElements(c))return this.props.navProps.context.telemetry.error("Navigation Submenu content is empty, module wont render."),null;let v="";const g=c.map(((e,n)=>{const r=e.subMenu&&l.ArrayExtensions.hasElements(e.subMenu);let o,a;o=r&&this.state.isOnlyMobile?this._renderButtonMenuItem(e,t,n):this.currentLevel!==s.one&&r?null:this.getMenuItem(e,n);const c=r&&d&&this.currentLevel<=Math.round(p)-s.one;r&&!this.state.isOnlyMobile&&(this.currentLevel>=s.two?a=this._renderSubMenuDrawer(e):this.currentLevel<=this.supportedLevel&&(this.currentLevel++,v=`level-${this.currentLevel.toString()}`,a=this._renderSubMenu(e.subMenu,void 0,!0))),c&&this.state.isOnlyMobile&&(this.currentLevel++,v=d?`level-${this.currentLevel.toString()}`:"",a=this._renderSubMenu(e.subMenu,e.id,!0));const g=e.imageSource?e.imageSource:"";return i.createElement(u.Node,Object.assign({},m,{key:e.id,onMouseOver:this.currentLevel===s.one&&this._updateCategoryImage(g,e),className:h()(m.className,c&&"havesubmenu"),ref:this._shouldAddFocusMenuRef(n,this.state.mobileViewLabelText,e.linkText)?this.menuItemRef:null}),o,a)}));return this._renderMenu(v,g,n)}getMenuItem(e,t){let n;return n=this.currentLevel===s.one?e.linkURL?this._renderLinkMenuItemLevelOne(e,t):this._renderSpanMenuItem(e):e.linkURL?this._renderLinkMenuItem(e,t):this._renderSpanMenuItem(e),n}_renderSubMenuDrawer(e){var t;const n=`level-${this.currentLevel.toString()}`,r=e.linkText,o=this.state.drawerKeyValue,a=void 0!==r?r:"",c=o,m=null!==(t=this.props.navProps.config.menuLevelSupport)&&void 0!==t?t:s.three;let d=!1;c[e.id]&&(d=!0);const p={timeout:0,isOpen:d};return i.createElement(u.Drawer,{collapseProps:p,key:e.id,className:h()("ms-nav__drawer_desktop",n),openGlyph:"ms-nav__drawer-open",closeGlyph:"ms-nav__drawer-close",glyphPlacement:"start",toggleButtonText:a,onToggle:this._bindDesktopCategoryClick(e.id,d)},i.createElement("div",null,e.subMenu.map((e=>l.ArrayExtensions.hasElements(e.subMenu)&&(this.currentLevel++,this.currentLevel<m)?this._renderSubMenuDrawer(e):this._renderDrawerLink(e)))))}_renderButtonMenuItem(e,t,n){return i.createElement(u.Node,Object.assign({key:n},this.props.navProps.Button,{onClick:this._handleDropdownToggle(e,t),"aria-haspopup":!(this.state.activeMenu&&this.state.activeMenu===e.id),"aria-expanded":!(!this.state.activeMenu||this.state.activeMenu!==e.id),"data-parent":t,"aria-label":this.state.isOnlyMobile?e.ariaLabel:void 0}),e.linkText)}_renderLinkMenuItem(e,t){const{Link:n}=this.props.navProps,s=e.linkText?e.linkText:"";this.payLoad.contentAction.etext=s;const r=(0,u.getTelemetryAttributes)(this.telemetryContent,this.payLoad);return i.createElement(u.Node,Object.assign({},n,{key:t,href:e.linkURL},r,{target:e.shouldOpenNewTab?"_blank":void 0,onClick:(0,u.onTelemetryClick)(this.telemetryContent,this.payLoad,s)}),e.linkText)}_renderLinkMenuItemLevelOne(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{Link:s}=this.props.navProps,r=e.linkText?e.linkText:"",o=e.imageSource?e.imageSource:"";this.payLoad.contentAction.etext=r;const a=(0,u.getTelemetryAttributes)(this.telemetryContent,this.payLoad);return i.createElement(u.Node,Object.assign({},s,{key:t,onMouseOver:n&&this._updateCategoryImage(o,e),href:e.linkURL},a,{onClick:(0,u.onTelemetryClick)(this.telemetryContent,this.payLoad,r)}),e.linkText)}_renderPromotionalLink(e,t){const{Link:n}=this.props.navProps;this.payLoad.contentAction.etext=e;const s=(0,u.getTelemetryAttributes)(this.telemetryContent,this.payLoad);return e&&t?i.createElement(u.Node,Object.assign({},n,{href:t},s,{onClick:(0,u.onTelemetryClick)(this.telemetryContent,this.payLoad,e)}),e):null}_renderSpanMenuItem(e,t){const{Span:n}=this.props.navProps;return i.createElement(u.Node,Object.assign({key:t},n),e.linkText)}_renderMenu(e,t,n){var r;const{DivContainer:o,MenuList:a,ImageDivContainer:c,showCategoryImage:m,showPromotionalContent:d}=this.props.navProps,v=!this.state.isOnlyMobile&&m&&null!==this.state.categoryImage&&void 0!==this.state.categoryImage&&!n,g=!this.state.isOnlyMobile&&d&&l.ArrayExtensions.hasElements(this.state.categoryImage)&&!n,b=this.currentLevel>s.two||v?o.className:"ms-nav__deafult";this.currentLevel=s.one;const M=v&&this.props.navProps.config.menuLevelSupport&&this.props.navProps.config.menuLevelSupport>s.two&&"navmenu-multi-level",y=null===(r=this.state.categoryImage)||void 0===r?void 0:r.filter((e=>!l.StringExtensions.isNullOrWhitespace(e.src))),_=null==y?void 0:y.map((e=>e.src)).join("-");return i.createElement(u.Node,Object.assign({},o,{className:b}),i.createElement(u.Node,Object.assign({},a,{className:h()(a.className,e,v&&"havecateImage",M)}),t),i.createElement("div",{className:"category-image-container",key:_},v&&l.ArrayExtensions.hasElements(y)&&y.map((e=>{var t,n;return i.createElement(u.Node,Object.assign({},c,{className:c.className,key:e.src}),p(this.props,null!==(t=e.src)&&void 0!==t?t:"",e.altText.toString()),g&&this._renderPromotionalLink(e.altText,null===(n=e.additionalProperties)||void 0===n?void 0:n.linkUrl))}))))}}b.isBackTrack=!1,(0,o.Cg)([m.EW],b.prototype,"isOnlyMobile",null);const M=b;function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class k extends i.PureComponent{constructor(e){super(e),this.supportedLevel=s.four,this.currentLevel=s.zero,this.escapeKey=s.escapeKey,this.promotionalImage=[],this.menuItemData=[],this._toggleNavBar=()=>{this.setState((e=>({activeMenu:s.rootMenu,isNavOpen:!e.isNavOpen})))},this._bindDesktopCategoryClick=(e,t)=>()=>{const{drawerKeyValue:n}=this.state,s={[e]:!t};this.setState({drawerKeyValue:_(_({},n),s)})},this._updateCategoryImage=(e,t)=>()=>{const n=t.linkText?t.linkText:"",s=[{src:e,altText:n}];if(l.ArrayExtensions.hasElements(t.promotionalContent))for(const e of t.promotionalContent){const t=e.image.src;s.push({src:t,altText:e.text,additionalProperties:{linkUrl:e.linkUrl.destinationUrl}})}this.setState({categoryImage:l.ArrayExtensions.hasElements(s)?s:[{src:"empty"}]})},this._handleDropdownToggle=(e,t)=>()=>{this.state.isOnlyMobile?(k.isBackTrack=!1,this.setState({activeMenu:e.id,mobileViewLabelText:e.linkText,parentMenu:t})):(this.setState({activeMenu:e.id,parentMenu:t}),this.props.navProps.showCategoryImage&&this._updateCategoryImage(e.imageSource,e)())},this._handleGoBack=()=>()=>{k.isBackTrack=!0,this.setState((e=>({activeMenu:e.parentMenu})))},this._handleClickOutside=e=>{this.menuNode.current&&!this.menuNode.current.contains(e.target)&&(this.state.isOnlyMobile?this.setState({activeMenu:void 0,mobileViewLabelText:"",isNavOpen:!1}):this.setState({activeMenu:s.rootMenu,mobileViewLabelText:"",isNavOpen:!1}))},this._addShopAllLink=()=>{const{menuItemData:e}=this.props.navProps;var t;(this.menuItemData=e,l.ArrayExtensions.hasElements(e)&&l.ArrayExtensions.hasElements(e[0].subMenu))&&(null===(t=this.menuItemData[0].subMenu)||void 0===t||t.map((e=>{const t={};return Object.assign(t,{imageSource:e.imageSource}),Object.assign(t,{linkText:this.props.navProps.resources.allCategoryMenuText}),Object.assign(t,{linkURL:e.linkURL}),l.ArrayExtensions.hasElements(e.subMenu)&&e.menuSource===a.MenuSource.Retail&&e.subMenu.unshift(t),e})))},this._shouldAddFocusMenuRef=(e,t,n)=>!k.isBackTrack&&0===e||!(!n||!t)&&t===n,this._closeNavMenu=()=>{this.state.isOnlyMobile?this.setState({activeMenu:void 0,mobileViewLabelText:"",isNavOpen:!1}):this.setState({activeMenu:s.rootMenu,mobileViewLabelText:"",isNavOpen:!1})},this._escFunction=e=>{e.keyCode===this.escapeKey&&!this.state.isOnlyMobile&&this.state.isNavOpen&&this.setState({activeMenu:s.rootMenu,mobileViewLabelText:"",isNavOpen:!1})},this._customUpdateViewport=()=>{this.setState({isOnlyMobile:this.isOnlyMobile})},this.menuNode=i.createRef(),this.menuItemRef=i.createRef();const{menuItemData:t}=this.props.navProps;if(l.ArrayExtensions.hasElements(t)&&l.ArrayExtensions.hasElements(t[0].subMenu)){const e=t[0].subMenu[0].imageSource?t[0].subMenu[0].imageSource:"",n=t[0].subMenu[0].linkText?t[0].subMenu[0].linkText:"";this.promotionalImage=[{src:e,altText:n}],l.ArrayExtensions.hasElements(t[0].subMenu[0].promotionalContent)&&t[0].subMenu[0].promotionalContent.map((e=>{const t=e.image.src;return this.promotionalImage.push({src:t,altText:e.text,additionalProperties:{linkUrl:e.linkUrl.destinationUrl}}),null}))}this.state={activeMenu:s.rootMenu,mobileViewLabelText:"",parentMenu:void 0,drawerKeyValue:{},isOnlyMobile:this.isOnlyMobile,categoryImage:this.promotionalImage,isNavOpen:!1},this.telemetryContent=(0,u.getTelemetryObject)(this.props.navProps.context.request.telemetryPageName,this.props.navProps.friendlyName,this.props.navProps.telemetry),this.payLoad=(0,u.getPayloadObject)("click",this.telemetryContent,"",""),this.attributes=(0,u.getTelemetryAttributes)(this.telemetryContent,this.payLoad)}get isOnlyMobile(){return"xs"===(0,u.isMobile)({variant:u.VariantType.Browser,context:this.props.navProps.context.request})}componentDidMount(){this.customResizeThrottledEventHandler=(0,u.addThrottledEvent)(window,"resize",this._customUpdateViewport),document.addEventListener("keydown",this._escFunction,!1),this._customUpdateViewport(),document.body.addEventListener("mousedown",this._handleClickOutside),this._addShopAllLink()}componentDidUpdate(){var e;null!==(e=this.menuItemRef.current)&&void 0!==e&&e.children[0]&&this.props.navProps.isMobileView&&this.menuItemRef.current.children[0].focus()}componentWillUnmount(){window.removeEventListener("resize",this.customResizeThrottledEventHandler,!1),document.body.removeEventListener("mousedown",this._handleClickOutside,!1)}render(){this.currentLevel=s.one;return i.createElement(u.Node,{className:"nav-menu-container",ref:this.menuNode},this.state.isOnlyMobile?this._renderMobileMenu():i.createElement(i.Fragment,null,i.createElement(u.Button,Object.assign({className:"ms-header__nav-icon",onClick:this._toggleNavBar,"aria-controls":"header-nav-mobile",title:this.props.navProps.resources.hamburgerAriaLabel,"aria-label":this.props.navProps.resources.hamburgerAriaLabel},this.attributes)),this._renderCollapseMenu()))}_renderCollapseMenu(){return i.createElement(u.Collapse,{className:"ms-header__collapsible-hamburger",isOpen:this.state.isNavOpen},this.state.isOnlyMobile?this._renderMobileMenu():this._renderDesktopMenu())}_renderMobileMenu(){const{MobileBackButton:e,MobileDescriptionContainer:t,MobileDescriptionLabel:n,Navigation:r}=this.props.navProps;return this.currentLevel=s.one,i.createElement(u.Module,Object.assign({},r,{className:h()(r.className,this.state.isOnlyMobile&&void 0!==this.state.activeMenu?"child":"parent")}),i.createElement(u.Node,Object.assign({},this.props.navProps.MenuList,{tabIndex:"-1"}),this.state.isOnlyMobile&&void 0!==this.state.activeMenu&&i.createElement(u.Node,Object.assign({},t),i.createElement(u.Node,Object.assign({},e,{onClick:this._handleGoBack()})),i.createElement(u.Node,Object.assign({},n),this.state.mobileViewLabelText)),this._renderDisplay()))}_renderDesktopMenu(){const{Navigation:e}=this.props.navProps;return i.createElement(u.Module,Object.assign({},e,{className:h()(e.className)}),i.createElement(u.Node,Object.assign({},this.props.navProps.MenuList,{tabIndex:"-1"}),this._renderDisplay(),i.createElement("div",{className:"ms-nav-close-button"},i.createElement("button",{className:"btn nav-menu-close","aria-label":"Close",onClick:this._closeNavMenu}))))}_renderDrawerLink(e){return e.linkURL&&!l.StringExtensions.isNullOrWhitespace(e.linkURL)?this._renderLinkMenuItem(e):e.linkURL?null:this._renderSpanMenuItem(e)}_renderDisplay(){const{ListItem:e}=this.props.navProps;let t=[];t=this.state.isOnlyMobile?this.menuItemData:this.props.navProps.menuItemData;const{activeMenu:n}=this.state,s=[];let r=[],o=[];const c=JSON.parse(JSON.stringify(t));for(const e of c)o=e.subMenu.filter((e=>e.id&&e.id>=a.MenuTypeIndexId.Retail)),e.subMenu=o;for(const e of t)r=e.subMenu.filter((e=>e.id&&e.id<a.MenuTypeIndexId.Retail));if(this.state.isOnlyMobile&&void 0!==n&&l.ArrayExtensions.hasElements(t)){let r={};for(const e of t){if(e.id===n){r=e,k.isBackTrack?this.setState({parentMenu:void 0,mobileViewLabelText:e.linkText}):this.setState({parentMenu:void 0});break}if(r=this._getFromSubMenu(e),r&&r.id===n)break}r&&s.push(i.createElement(u.Node,Object.assign({key:r.id},e)," ",this._createMenuItemList(r)," "," "))}else{for(const[t,n]of c.entries())s.push(i.createElement(u.Node,Object.assign({key:n.id},e,{ref:this._shouldAddFocusMenuRef(t,this.state.mobileViewLabelText,n.linkText)?this.menuItemRef:null}),this._createMenuItemList(n)));for(const[t,n]of r.entries())s.push(i.createElement(u.Node,Object.assign({key:n.id},e,{ref:this._shouldAddFocusMenuRef(t,this.state.mobileViewLabelText,n.linkText)?this.menuItemRef:null}),this._createMenuItemList(n)))}return s}_getFromSubMenu(e){const t=null==e?void 0:e.subMenu;if(t&&l.ArrayExtensions.hasElements(t))for(let n=0;n<=t.length-s.one;n++){const i=t[Number(n)];let r=null==e?void 0:e.id;if(i.id===this.state.activeMenu)return r===s.rootMenu&&i.id<a.MenuTypeIndexId.Retail&&(r=void 0),k.isBackTrack?this.setState({parentMenu:r,mobileViewLabelText:i.linkText}):this.setState({parentMenu:r}),i;const o=this._getFromSubMenu(i);if(o)return o}return null}_createMenuItemList(e){return l.ArrayExtensions.hasElements(e.subMenu)?this.state.isOnlyMobile&&void 0!==this.state.activeMenu?this._renderSubMenu(e.subMenu,e.id,!1):i.createElement(i.Fragment,null,this._renderButtonMenuItem(e),this._renderSubMenu(e.subMenu,e.id)):e.linkURL&&!l.StringExtensions.isNullOrWhitespace(e.linkURL)?this._renderLinkMenuItem(e,e.id):e.linkURL?null:this._renderSpanMenuItem(e)}_renderSubMenu(e,t,n){var r,o;let c=e;t===s.rootMenu&&(c=e.filter((e=>e.id&&e.id>=a.MenuTypeIndexId.Retail)));const{ListItem:m}=this.props.navProps,d=null!==(r=this.props.navProps.config.enableMultilevelMenu)&&void 0!==r&&r,p=null!==(o=this.props.navProps.config.menuLevelSupport)&&void 0!==o?o:s.three;if(t&&this.state.activeMenu!==t)return this.props.navProps.context.telemetry.error("Navigation Active menu content is empty, module wont render."),null;if(!c||!l.ArrayExtensions.hasElements(c))return this.props.navProps.context.telemetry.error("Navigation Submenu content is empty, module wont render."),null;let v="";const g=c.map(((e,n)=>{const r=e.subMenu&&l.ArrayExtensions.hasElements(e.subMenu);let o,a;o=r&&this.state.isOnlyMobile?this._renderButtonMenuItem(e,t,n):this.currentLevel!==s.one&&r?null:this.getMenuItem(e,n);const c=r&&d&&this.currentLevel<=Math.round(p)-s.one;r&&!this.state.isOnlyMobile&&(this.currentLevel>=s.two?a=this._renderSubMenuDrawer(e):this.currentLevel<=this.supportedLevel-s.one&&(this.currentLevel++,v=`level-${this.currentLevel.toString()}`,a=this._renderSubMenu(e.subMenu,void 0,!0))),c&&this.state.isOnlyMobile&&(this.currentLevel++,v=d?`level-${this.currentLevel.toString()}`:"",a=this._renderSubMenu(e.subMenu,e.id,!0));const g=e.imageSource?e.imageSource:"";return i.createElement(u.Node,Object.assign({},m,{key:e.id,onMouseOver:this.currentLevel===s.one&&this._updateCategoryImage(g,e),className:h()(m.className,c&&"havesubmenu"),ref:this._shouldAddFocusMenuRef(n,this.state.mobileViewLabelText,e.linkText)?this.menuItemRef:null}),o,a)}));return this._renderMenu(v,g,n)}getMenuItem(e,t){let n;return n=this.currentLevel===s.one?e.linkURL?this._renderLinkMenuItemLevelOne(e,t):this._renderSpanMenuItem(e):e.linkURL?this._renderLinkMenuItem(e,t):this._renderSpanMenuItem(e),n}_renderSubMenuDrawer(e){var t;const n=`level-${this.currentLevel.toString()}`,r=e.linkText,o=this.state.drawerKeyValue,a=void 0!==r?r:"",c=o,m=null!==(t=this.props.navProps.config.menuLevelSupport)&&void 0!==t?t:s.three;let d=!1;c[e.id]&&(d=!0);const p={timeout:0,isOpen:d};return i.createElement(u.Drawer,{collapseProps:p,key:e.id,className:h()("ms-nav__drawer_desktop",n),openGlyph:"ms-nav__drawer-open",closeGlyph:"ms-nav__drawer-close",glyphPlacement:"start",toggleButtonText:a,onToggle:this._bindDesktopCategoryClick(e.id,d)},i.createElement("div",null,e.subMenu.map((e=>l.ArrayExtensions.hasElements(e.subMenu)&&(this.currentLevel++,this.currentLevel<m)?this._renderSubMenuDrawer(e):this._renderDrawerLink(e)))))}_renderButtonMenuItem(e,t,n){return i.createElement(u.Node,Object.assign({key:n},this.props.navProps.Button,{onClick:this._handleDropdownToggle(e,t),"aria-haspopup":!(this.state.activeMenu&&this.state.activeMenu===e.id),"aria-expanded":!(!this.state.activeMenu||this.state.activeMenu!==e.id),"data-parent":t,"aria-label":this.state.isOnlyMobile?e.ariaLabel:void 0}),e.linkText)}_renderLinkMenuItem(e,t){const{Link:n}=this.props.navProps,s=e.linkText?e.linkText:"";this.payLoad.contentAction.etext=s;const r=(0,u.getTelemetryAttributes)(this.telemetryContent,this.payLoad);return i.createElement(u.Node,Object.assign({},n,{key:t,href:e.linkURL},r,{target:e.shouldOpenNewTab?"_blank":void 0,onClick:(0,u.onTelemetryClick)(this.telemetryContent,this.payLoad,s)}),e.linkText)}_renderLinkMenuItemLevelOne(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{Link:s}=this.props.navProps,r=e.linkText?e.linkText:"",o=e.imageSource?e.imageSource:"";this.payLoad.contentAction.etext=r;const a=(0,u.getTelemetryAttributes)(this.telemetryContent,this.payLoad);return i.createElement(u.Node,Object.assign({},s,{key:t,onMouseOver:n&&this._updateCategoryImage(o,e),href:e.linkURL},a,{onClick:(0,u.onTelemetryClick)(this.telemetryContent,this.payLoad,r)}),e.linkText)}_renderPromotionalLink(e,t){const{Link:n}=this.props.navProps;this.payLoad.contentAction.etext=e;const s=(0,u.getTelemetryAttributes)(this.telemetryContent,this.payLoad);return e&&t?i.createElement(u.Node,Object.assign({},n,{href:t},s,{onClick:(0,u.onTelemetryClick)(this.telemetryContent,this.payLoad,e)}),e):null}_renderSpanMenuItem(e,t){const{Span:n}=this.props.navProps;return i.createElement(u.Node,Object.assign({key:t},n),e.linkText)}_renderMenu(e,t,n){var r;const{DivContainer:o,ImageDivContainer:a,showCategoryImage:c,showPromotionalContent:m}=this.props.navProps,d=!this.state.isOnlyMobile&&c&&null!==this.state.categoryImage&&void 0!==this.state.categoryImage&&!n,v=!this.state.isOnlyMobile&&m&&l.ArrayExtensions.hasElements(this.state.categoryImage)&&!n,g=this.currentLevel>s.two||d?o.className:"ms-nav__deafult";this.currentLevel=s.one;const b=d&&this.props.navProps.config.menuLevelSupport&&this.props.navProps.config.menuLevelSupport>s.two&&"navmenu-multi-level",M=null===(r=this.state.categoryImage)||void 0===r?void 0:r.filter((e=>!l.StringExtensions.isNullOrWhitespace(e.src))),y=null==M?void 0:M.map((e=>e.src)).join("-");return i.createElement(u.Node,Object.assign({},o,{className:g}),i.createElement(u.Node,Object.assign({},this.props.navProps.MenuList,{className:h()(this.props.navProps.MenuList.className,e,d&&"havecateImage",b)}),t),i.createElement("div",{className:"category-image-container",key:y},d&&l.ArrayExtensions.hasElements(M)&&M.map((e=>{var t,n;return i.createElement(u.Node,Object.assign({},a,{className:a.className,key:e.src}),p(this.props,null!==(t=e.src)&&void 0!==t?t:"",e.altText.toString()),v&&this._renderPromotionalLink(e.altText,null===(n=e.additionalProperties)||void 0===n?void 0:n.linkUrl))}))))}}k.isBackTrack=!1,(0,o.Cg)([m.EW],k.prototype,"isOnlyMobile",null);const L=k,O=e=>e.config.enabletopMenu?i.createElement(L,{navProps:e}):i.createElement(M,{navProps:e})}},e=>{e.O(0,[0,3,2,4,5,6,7,8,9],(()=>{return t=1502,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=a15c0e5f6d02465eb5b2.bundle.js.map