<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <title>Checkout - Grainhouse Coffee</title>
    <meta name="robots" content="noindex, nofollow">
    
    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.snipcart.com https://app.snipcart.com https://fonts.googleapis.com; style-src 'self' 'unsafe-inline' https://cdn.snipcart.com https://fonts.googleapis.com; img-src 'self' data: https: blob:; font-src 'self' https://fonts.gstatic.com https://cdn.snipcart.com data:; connect-src 'self' https://app.snipcart.com https://api.snipcart.com https://cdn.snipcart.com; frame-src https://app.snipcart.com https://checkout.snipcart.com; object-src 'none'; base-uri 'self';">
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://app.snipcart.com">
    <link rel="preconnect" href="https://cdn.snipcart.com">
    
    <!-- Fonts - match site design -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Snipcart CSS -->
    <link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.2.0/default/snipcart.css" />
    
    <style>
        /* Reset and Base */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        :root {
            /* Match site color scheme */
            --brown: #4a3728;
            --cream: #f5f0e8;
            --gold: #c9a96e;
            --dark: #1a1a1a;
            --white: #ffffff;
            --green: #2d5a3d;
            --border: #e5e5e5;
            --text-muted: #707070;
        }
        
        html, body {
            height: 100%;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            font-size: 14px;
            line-height: 1.6;
            color: var(--dark);
            background-color: var(--cream);
            -webkit-font-smoothing: antialiased;
        }
        
        /* Header - matches site navigation style */
        .checkout-header {
            background: var(--white);
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .checkout-header__logo {
            font-family: 'Playfair Display', serif;
            font-size: 24px;
            font-weight: 700;
            color: var(--brown);
            text-decoration: none;
            letter-spacing: -0.5px;
        }
        
        .checkout-header__logo:hover {
            opacity: 0.8;
        }
        
        .checkout-header__back {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: color 0.2s;
        }
        
        .checkout-header__back:hover {
            color: var(--brown);
        }
        
        /* Main checkout container */
        .checkout-main {
            min-height: calc(100vh - 80px);
            display: flex;
            flex-direction: column;
        }
        
        /* Empty cart message */
        .empty-cart-message {
            display: none;
            max-width: 500px;
            margin: 80px auto;
            padding: 60px 40px;
            text-align: center;
            background: var(--white);
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        
        .empty-cart-message.show {
            display: block;
        }
        
        .empty-cart-message__icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.4;
        }
        
        .empty-cart-message h1 {
            font-family: 'Playfair Display', serif;
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--dark);
        }
        
        .empty-cart-message p {
            color: var(--text-muted);
            font-size: 16px;
            margin-bottom: 30px;
        }
        
        .empty-cart-message__button {
            display: inline-block;
            padding: 16px 36px;
            background: var(--brown);
            color: var(--white);
            text-decoration: none;
            border-radius: 30px;
            font-weight: 600;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s;
        }
        
        .empty-cart-message__button:hover {
            background: var(--gold);
            transform: translateY(-2px);
        }
        
        /* Secure checkout badge */
        .checkout-secure-badge {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 20px;
            color: var(--text-muted);
            font-size: 13px;
        }
        
        /* Micro-loader for checkout transition (<700ms) */
        .checkout-loader {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--color-canvas);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.2s ease;
        }
        
        .checkout-loader.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .checkout-loader__spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--color-border);
            border-top-color: var(--color-interactive);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        
        .checkout-loader__text {
            margin-top: 16px;
            font-size: 16px;
            color: var(--color-ink-subdued);
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Snipcart Modal - Full width checkout */
        .snipcart-modal__container {
            max-width: 1200px !important;
            width: 100% !important;
            margin: 0 auto !important;
        .checkout-secure-badge svg {
            color: var(--green);
        }
        
        /* Loading indicator */
        .checkout-loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 80px 40px;
            text-align: center;
        }
        
        .checkout-loading__spinner {
            width: 48px;
            height: 48px;
            border: 3px solid var(--border);
            border-top-color: var(--brown);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .checkout-loading__text {
            color: var(--text-muted);
            font-size: 16px;
        }
        
        /* Snipcart container */
        .checkout-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        #snipcart {
            flex: 1;
            min-height: 500px;
        }
        
        /* Error panel styling */
        .checkout-error-panel {
            display: none;
            max-width: 500px;
            margin: 60px auto;
            padding: 40px;
            background: var(--white);
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            text-align: center;
        }
        
        .checkout-error-panel.show {
            display: block;
        }
        
        .checkout-error-panel__icon {
            width: 60px;
            height: 60px;
            background: #fee2e2;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: #dc2626;
            font-size: 28px;
        }
        
        .checkout-error-panel h2 {
            font-family: 'Playfair Display', serif;
            font-size: 24px;
            color: var(--dark);
            margin-bottom: 12px;
        }
        
        .checkout-error-panel p {
            color: var(--text-muted);
            margin-bottom: 24px;
            line-height: 1.6;
        }
        
        .checkout-error-panel__actions {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .checkout-error-panel__btn {
            padding: 12px 24px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-block;
        }
        
        .checkout-error-panel__btn--primary {
            background: var(--brown);
            color: var(--white);
            border: none;
        }
        
        .checkout-error-panel__btn--primary:hover {
            background: var(--gold);
        }
        
        .checkout-error-panel__btn--secondary {
            background: transparent;
            color: var(--brown);
            border: 1px solid var(--border);
        }
        
        .checkout-error-panel__btn--secondary:hover {
            border-color: var(--brown);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .checkout-header {
                padding: 16px 20px;
            }
            
            .checkout-header__logo {
                font-size: 20px;
            }
            
            .empty-cart-message {
                margin: 40px 16px;
                padding: 40px 24px;
            }
            
            .empty-cart-message h1 {
                font-size: 24px;
            }
            
            .checkout-error-panel {
                margin: 40px 16px;
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Micro-loader for checkout transition -->
    <div class="checkout-loader" id="checkoutLoader">
        <div class="checkout-loader__spinner"></div>
        <p class="checkout-loader__text">Opening secure checkout...</p>
    </div>
    
    <!-- Header -->
    <header class="checkout-header">
        <a href="index.html" class="checkout-header__logo">Grainhouse Coffee</a>
        <a href="collections.html" class="checkout-header__back">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            Continue Shopping
        </a>
    </header>
    
    <!-- Main checkout area -->
    <main class="checkout-main">
        <!-- Empty Cart Message (hidden by default) -->
        <div class="empty-cart-message" id="emptyCartMessage">
            <div class="empty-cart-message__icon">â˜•</div>
            <h1>Your Cart is Empty</h1>
            <p>Looks like you haven't added any items to your cart yet. Browse our selection of fresh roasted coffee.</p>
            <a href="collections.html" class="empty-cart-message__button">Shop Coffee</a>
            <div class="checkout-secure-badge">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                </svg>
                Secure checkout powered by Snipcart
            </div>
        </div>
        
        <!-- Loading state -->
        <div class="checkout-loading" id="checkoutLoading">
            <div class="checkout-loading__spinner"></div>
            <p class="checkout-loading__text">Preparing checkout...</p>
        </div>
        
        <!-- Checkout content area -->
        <div class="checkout-content" id="checkoutContent" style="display: none;">
            <!-- Snipcart Container -->
            <div id="snipcart" 
                 data-api-key="ODMwYTIxNjQtMjkxYy00YjNlLWI0NTAtYTkyNWFkNTdlNzNhNjM5MDE1ODA5OTIzMjEyMTUw" 
                 data-config-modal-style="side">
            </div>
        </div>
        
        <!-- Error Panel -->
        <div class="checkout-error-panel" id="checkoutErrorPanel">
            <div class="checkout-error-panel__icon">!</div>
            <h2>Unable to Load Checkout</h2>
            <p>We're having trouble loading the checkout system. This may be due to an ad-blocker or network issue. Please try refreshing the page.</p>
            <div class="checkout-error-panel__actions">
                <button class="checkout-error-panel__btn checkout-error-panel__btn--primary" onclick="window.location.reload()">
                    Refresh Page
                </button>
                <a href="collections.html" class="checkout-error-panel__btn checkout-error-panel__btn--secondary">
                    Return to Shop
                </a>
            </div>
        </div>
    </main>
    
    <!-- Snipcart Script -->
    <script async src="https://cdn.snipcart.com/themes/v3.2.0/default/snipcart.js"></script>
    
    <script>
        // ============================================
        // CHECKOUT PAGE INITIALIZATION
        // ============================================
        
        const SCRIPT_URL = 'https://cdn.snipcart.com/themes/v3.2.0/default/snipcart.js';
        const CHECK_DELAY = 2000;
        const LOADER_MAX_TIME = 700; // Max time to show loader (ms)
        const errorPanel = document.getElementById('snipcartErrorPanel');
        const emptyCartMessage = document.getElementById('emptyCartMessage');
        const scriptUrlElement = document.getElementById('snipcartScriptUrl');
        const checkoutLoader = document.getElementById('checkoutLoader');
        
        // Track initialization state to prevent double-init
        // These flags don't need resetting as this is a dedicated checkout page
        // Navigation away causes full page reload which resets all state
        let snipcartInitialized = false;
        let checkoutOpened = false;
        
        // Hide loader function
        function hideLoader() {
            if (checkoutLoader) {
                checkoutLoader.classList.add('hidden');
            }
        }
        
        // UI Elements
        const loadingEl = document.getElementById('checkoutLoading');
        const contentEl = document.getElementById('checkoutContent');
        const emptyCartEl = document.getElementById('emptyCartMessage');
        const errorPanelEl = document.getElementById('checkoutErrorPanel');
        
        // Helper functions
        function hideAll() {
            if (loadingEl) loadingEl.style.display = 'none';
            if (contentEl) contentEl.style.display = 'none';
            if (emptyCartEl) emptyCartEl.classList.remove('show');
            if (errorPanelEl) errorPanelEl.classList.remove('show');
        }
        
        function showLoading() {
            hideAll();
            if (loadingEl) loadingEl.style.display = 'flex';
        }
        
        function showCheckout() {
            hideAll();
            if (contentEl) contentEl.style.display = 'flex';
        }
        
        function showEmptyCart() {
            hideAll();
            if (emptyCartEl) emptyCartEl.classList.add('show');
        }
        
        // Ensure loader is hidden after max time
        setTimeout(hideLoader, LOADER_MAX_TIME);
        
        // Check if Snipcart loaded
        setTimeout(function() {
            if (typeof window.Snipcart === 'undefined') {
                logError('Snipcart failed to load after ' + CHECK_DELAY + 'ms');
                logError('Possible causes: CSP, ad-blocker, network issue, or script URL 404');
                hideLoader();
                if (errorPanel) {
                    errorPanel.classList.add('show');
                }
            } else {
                logSuccess('Snipcart script loaded');
            }
        }, CHECK_DELAY);
        
        // Diagnostics logging (only in development)
        function log(message, type) {
            if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                const prefix = type === 'error' ? 'âŒ' : type === 'success' ? 'âœ…' : 'ðŸ”µ';
                console.log(prefix + ' [Checkout]', message);
            }
        }
        
        // Helper logging functions that delegate to log()
        function logError(message) {
            log(message, 'error');
        }
        
        function logSuccess(message) {
            log(message, 'success');
        }
        
        function logInfo(message) {
            log(message);
        }
        
        // Show error panel
        function showError() {
            hideLoader();
            if (errorPanelEl) {
                errorPanelEl.classList.add('show');
            }
        }
        
        // Sync custom cart to Snipcart
        function syncCartToSnipcart() {
            if (!window.Snipcart || !window.Snipcart.api) {
                log('Snipcart not ready, retrying...');
                setTimeout(syncCartToSnipcart, 500);
                return;
            }
            
            try {
                const customCartJson = localStorage.getItem('grainhouse_cart');
                let customCart = [];
                
                if (customCartJson) {
                    try {
                        customCart = JSON.parse(customCartJson);
                    } catch (e) {
                        log('Failed to parse custom cart: ' + e.message, 'error');
                    }
                }
                
                if (customCart && customCart.length > 0) {
                    log('Syncing ' + customCart.length + ' items from custom cart to Snipcart');
                    
                    // Clear Snipcart cart first
                    try {
                        const snipcartItems = window.Snipcart.api.cart.items.all();
                        snipcartItems.forEach(function(item) {
                            window.Snipcart.api.cart.items.remove(item.id);
                        });
                    } catch (e) {
                        log('Could not clear Snipcart cart: ' + e.message, 'error');
                    }
                    
                    // Add all items to Snipcart
                    customCart.forEach(function(item, index) {
                        try {
                            window.Snipcart.api.cart.items.add({
                                id: item.id || 'item-' + index,
                                name: item.name || 'Product',
                                price: parseFloat(item.price) || 0,
                                quantity: parseInt(item.quantity) || 1,
                                description: item.description || '',
                                image: item.image || '',
                                url: window.location.origin + window.location.pathname
                            });
                        } catch (e) {
                            log('Failed to add item to Snipcart: ' + e.message, 'error');
                        }
                    });
                    
                    log('Cart synced to Snipcart', 'success');
                }
            } catch (e) {
                log('Error syncing cart: ' + e.message, 'error');
            }
        }
        
        // Open checkout form
        function openCheckout() {
            if (!window.Snipcart || !window.Snipcart.api) {
                log('Snipcart not ready, retrying...');
                setTimeout(openCheckout, 500);
                return;
            }
            
            // Mark as initialized to prevent double-init
            if (!snipcartInitialized) {
                snipcartInitialized = true;
                logInfo('Snipcart initialized (first time)');
            }
            
            try {
                // Sync cart first
                syncCartToSnipcart();
                
                // Wait for sync, then check cart and open checkout
                setTimeout(function() {
                    try {
                        const itemCount = window.Snipcart.api.cart.items.count();
                        log('Cart item count: ' + itemCount);
                        
                        // Hide loader once we know cart state
                        hideLoader();
                        
                        if (itemCount === 0) {
                            log('Cart is empty - showing empty cart message');
                            showEmptyCart();
                            return;
                        }
                        
                        showCheckout();
                        log('Opening checkout with ' + itemCount + ' items', 'success');
                        
                        // Open Snipcart modal
                        if (window.Snipcart.api.modal && window.Snipcart.api.modal.show) {
                            window.Snipcart.api.modal.show();
                        } else if (window.Snipcart.api.theme && window.Snipcart.api.theme.cart) {
                            window.Snipcart.api.theme.cart.open();
                        }
                        
                        // Try to navigate to checkout step
                        setTimeout(function() {
                            const checkoutBtn = document.querySelector('button[data-action="checkout"], button.snipcart-button-primary');
                            if (checkoutBtn) {
                                checkoutBtn.click();
                                log('Navigated to checkout step', 'success');
                            }
                        }, 200);
                        
                    } catch (e) {
                        log('Error opening checkout: ' + e.message, 'error');
                        showError();
                    }
                }, 600);
            } catch (e) {
                log('Error in openCheckout: ' + e.message, 'error');
                showError();
            }
        }
        
        // Check if Snipcart loaded
        setTimeout(function() {
            if (typeof window.Snipcart === 'undefined') {
                log('Snipcart failed to load', 'error');
                showError();
            } else {
                log('Snipcart script loaded', 'success');
            }
        }, CHECK_DELAY);
        
        // Listen for script load errors
        window.addEventListener('error', function(e) {
            if (e.target && e.target.src && e.target.src.includes('snipcart')) {
                log('Snipcart script failed to load: ' + e.target.src, 'error');
                setTimeout(function() {
                    if (typeof window.Snipcart === 'undefined') {
                        showError();
                    }
                }, CHECK_DELAY);
            }
        }, true);
        
        // Initialize when Snipcart is ready
        document.addEventListener('snipcart.ready', function() {
            log('Snipcart ready', 'success');
            openCheckout();
        });
        
        // Fallback: Try after delay if ready event didn't fire
        setTimeout(function() {
            if (window.Snipcart && window.Snipcart.api) {
                const isOpen = document.querySelector('.snipcart-modal--opened, .snipcart-checkout');
                if (!isOpen) {
                    log('Fallback: Opening checkout');
                    openCheckout();
                }
            }
        }, 3000);
        
        // Show loading initially
        showLoading();
        log('Checkout page loaded');
    </script>
    
    <!-- Snipcart Checkout Customizations -->
    <style>
        /* Force product images in checkout */
        .snipcart-item-line {
            display: flex !important;
            align-items: flex-start !important;
            gap: 16px !important;
        }
        
        .snipcart-item-line__image,
        .snipcart-item-line__media {
            display: block !important;
            width: 80px !important;
            height: 80px !important;
            min-width: 80px !important;
            border-radius: 8px !important;
            overflow: hidden !important;
            background: #f8f6f3 !important;
            flex-shrink: 0 !important;
        }
        
        .snipcart-item-line__image img,
        .snipcart-item-line__media img {
            width: 100% !important;
            height: 100% !important;
            object-fit: cover !important;
        }
        
        /* Order summary items */
        .snipcart-order-summary .snipcart-cart-summary-item,
        .snipcart-cart-summary .snipcart-cart-summary-item,
        .snipcart-cart-summary-side .snipcart-cart-summary-item {
            display: flex !important;
            align-items: flex-start !important;
            gap: 16px !important;
            padding: 16px 0 !important;
            border-bottom: 1px solid #eee !important;
        }
        
        .snipcart-order-summary .snipcart-cart-summary-item:last-child,
        .snipcart-cart-summary .snipcart-cart-summary-item:last-child,
        .snipcart-cart-summary-side .snipcart-cart-summary-item:last-child {
            border-bottom: none !important;
        }
        
        .snipcart-cart-summary-item__image,
        .snipcart-order-summary [class*="image"],
        .snipcart-cart-summary [class*="item__image"] {
            display: block !important;
            width: 64px !important;
            height: 64px !important;
            min-width: 64px !important;
            border-radius: 8px !important;
            overflow: hidden !important;
            background: #f8f6f3 !important;
            flex-shrink: 0 !important;
            box-shadow: 0 2px 6px rgba(0,0,0,0.08) !important;
        }
        
        .snipcart-cart-summary-item__image img,
        .snipcart-order-summary [class*="image"] img,
        .snipcart-cart-summary [class*="item__image"] img {
            width: 100% !important;
            height: 100% !important;
            object-fit: cover !important;
        }
        
        .snipcart-cart-summary-item__name {
            font-weight: 600 !important;
            color: #333 !important;
            font-size: 15px !important;
            margin-bottom: 4px !important;
        }
        
        .snipcart-cart-summary-item__quantity {
            color: #888 !important;
            font-size: 14px !important;
        }
        
        .snipcart-cart-summary-item__price {
            font-weight: 600 !important;
            color: #333 !important;
        }
        
        /* Ensure checkout form is visible and full width */
        .snipcart-modal__container {
            max-width: 1200px !important;
            margin: 0 auto !important;
        }
        
        .snipcart-checkout {
            width: 100% !important;
        }
        
        /* Match desired layout: left column (form) + right column (order summary) */
        /* Snipcart v3 uses a side-by-side layout when modal-style is "side" */
        .snipcart-modal__container {
            display: flex !important;
            flex-direction: row !important;
        }
        
        /* Left column: checkout form fields */
        .snipcart-checkout__form-container,
        .snipcart-checkout > div:first-child,
        .snipcart-modal__container > div:first-child:not([class*="summary"]) {
            flex: 1 !important;
            padding: 40px !important;
            min-width: 0 !important;
        }
        
        /* Right column: order summary sidebar */
        .snipcart-order-summary,
        .snipcart-cart-summary-side,
        .snipcart-modal__container [class*="summary"],
        .snipcart-modal__container [class*="sidebar"],
        .snipcart-modal__container > div[class*="side"] {
            width: 400px !important;
            min-width: 400px !important;
            max-width: 400px !important;
            background: #fafafa !important;
            padding: 40px !important;
            border-left: 1px solid #e5e5e5 !important;
        }
        
        /* Prevent blank flash - ensure modal content is ready */
        .snipcart-modal {
            opacity: 1 !important;
            visibility: visible !important;
        }
        
        .snipcart-modal__container {
            opacity: 1 !important;
            transform: none !important;
        }
        
        /* Smooth transitions - prevent jarring movements */
        .snipcart-modal,
        .snipcart-modal__container,
        .snipcart-checkout {
            transition: opacity 0.2s ease, transform 0.2s ease !important;
        }
        
        /* Hide fees notice if present */
        #snipcart .snipcart-cart-summary-fees__notice,
        #snipcart [class*="fees__notice"],
        .snipcart-modal [class*="fees__notice"],
        .snipcart-checkout [class*="fees__notice"] {
            margin-bottom: 24px !important;
        }
        
        /* Total styling */
        #snipcart .snipcart-cart-summary__total,
        #snipcart [class*="summary__total"],
        .snipcart-modal [class*="summary__total"],
        .snipcart-checkout [class*="summary__total"] {
            margin-top: 16px !important;
            padding-top: 16px !important;
        }
        
        /* Responsive: stack columns on mobile */
        @media (max-width: 768px) {
            .snipcart-checkout,
            .snipcart-modal__container {
                flex-direction: column !important;
            }
            
            .snipcart-order-summary,
            .snipcart-cart-summary-side,
            .snipcart-checkout [class*="summary"],
            .snipcart-checkout [class*="right"] {
                width: 100% !important;
                min-width: 100% !important;
                border-left: none !important;
                border-top: 1px solid #e5e5e5 !important;
            }
        }
    </style>
</body>
</html>
